(function(n){var p=window.AmazonUIPageJS||window.P,r=p._namespace||p.attributeErrors,d=r?r("DetailPageSnSAssets",""):p;d.guardFatal?d.guardFatal(n)(d,window):d.execute(function(){n(d,window)})})(function(n,p,r){n.register("sns-buybox-constants",function(){return{SNS_QUANTITY_FIELD:"#mobileQuantityDropDown, #tabletQuantityDropDown",SNS_FREQUENCY_NAME:"rcxOrdFreq",SNS_OPT_IN_NAME:"snsOptIn",QUANTITY_CONTAINER:"#selectQuantity, #mobileQuantitySelection, #sns",QUANTITY:"[name\x3dquantity]",SNS_QUANTITY:"[name\x3drcxsubsQuan]",
SNS_MOBILE_QUANTITY:".snsQuantityRadio input[name\x3d'quantity']:checked",SNS_FREQUENCY_FORM_FIELD:"[name\x3drcxOrdFreq]",SNS_FREQUENCY_FORM_FIELD_MOBILE:".rcxOrdFreq",SNS_ONMLV2_FREQUENCY_TRIGGER_DESKTOP:"a:dropdown:rcxOrdFreq:select",SNS_ONMLV2_FREQUENCY_TRIGGER_MOBILE:".snsOrdFreqRadio",SNS_ONMLV2_QUANTITY_TRIGGER_DESKTOP:"#rcxsubsQuan",SNS_ONMLV2_QUANTITY_TRIGGER_MOBILE:".snsQuantityRadio",SNS_DP_FREQUENCY_TRIGGER:"#sns-dp-frequency-trigger span",SNS_OPT_IN_CHECKBOX:"#snsOptInCheckbox",SNS_OFFER_LISTING_FIELD:"#snsOfferListingID",
OFFER_LISTING_FIELD:"[name\x3dofferListingID]",SNS_FREQUENCY_SECTION:"#snsFrequencySection",SNS_SELECTED_FREQUENCY_LABEL:"#snsSelectedFrequencyLabel",SNS_FIRST_RECURRING_DELIVERY_DATE:"[id\x3dsnsFirstRecurringDeliveryDate]",SNS_BUY_NEW_BUTTON:"#buyNewSection, #newAccordionRow .a-accordion-row-a11y",SNS_BUY_USED_BUTTON:"#usedBuySection, #usedAccordionRow .a-accordion-row-a11y",ONE_CLICK_BUTTON:".onml-one-click-button",ONE_CLICK_BUTTON_ICON:".onml-one-click-button i",ONE_CLICK_BUTTON_TEXT:".onml-one-click-button input+span",
BUY_NOW_BUTTON:".onml-buy-now-button",BUY_NOW_BUTTON_ICON:".onml-buy-now-button i",BUY_NOW_BUTTON_TEXT:".onml-buy-now-button input+span",ADD_TO_CART_BUTTON:"#add-to-cart-button",ADD_TO_CART_DIV:"#addToCart",MOBILE_ADD_TO_CART_DIV:"#sns",TABLET_ADD_TO_CART_DIV:"#snsTablet",SNS_OPT_IN_FORM_FIELD:"[name\x3dsnsOptIn]",LEGACY_SPC_FORM_INPUT:"[name\x3d'submit.rcx-subscribe']",LEGACY_SPC_FORM_INPUT_X:"[name\x3d'submit.rcx-subscribe.x']",SNS_OFFER_FORM_FIELD:".snsONMLOffer",SNS_DISCOUNT_PILL:"#snsDiscountPill",
SNS_ONML_BUYBOX_UPSELL_MESSAGE_NON_TIERED:"#sns-onml-buybox-upsell-message-non-tiered",SNS_ONML_BUYBOX_UPSELL_MESSAGE_TIERED:"#sns-onml-buybox-upsell-message-tiered",SNS_ONML_FRDD:".sns-onml-frdd",SNS_ONMLV2_FRDD:".sns-onmlv2-frdd",SNS_FREQ_BOTTOMSHEET_SELECTOR:"[id\x3dsnsFrequencyBottomSheet]",SNS_OPT_IN_FEATURE_DIV:"#snsOptIn_div",SNS_OPT_IN_INPUT_ID:"[name\x3dsnsOptIn]",SNS_ONML_INIT_INPUT_ID:"isOnmlInitialized",SNS_ONML_INIT_INPUT_SELECTOR:"#isOnmlInitialized",SNS_DATA_UPDATE_EVENT:"sns-declarative-data-update",
SNS_ONML_MERCHANT_INFO:"#snsOnmlMerchantInfo",SNS_DISCOUNT_PILL_POPOVER_TIERED:".snsDiscountPillPopoverTiered",SNS_DISCOUNT_PILL_POPOVER_NON_TIERED:".snsDiscountPillPopoverNonTiered",SNS_BUY_NEW_PRICE:"#onml_snsBuyNew",CBB_BUY_NEW_PRICE:"#buyNew_cbb",NON_CBB_BUY_NEW_PRICE:"#buyNew_noncbb",SNS_PRICE_IN_BUY_USED_SECTION:"#usedBuySection #onml_snsBuyNew",CBB_SNS_BUY_NEW_PRICE:"#onml_snsBuyNew_cbb",DPV2_BUY_NEW_PRICE:"#buyNew_dpv2",SUBSCRIBE_ONLY_LINK:"#subscribe-only",SUBSCRIBE_ONLY_FORM:"#sns-onml-subscribe-only",
JUST_SUBSCRIBE_DIV:"#just-subscribe-button-container",GOLDBOX_DISCOUNT_MESSAGE:"#onml-goldbox-discount-message",SUBSCRIBE_ONLY_FORM_ATTRIBUTES:{name:"sns-onml-subscribe-only",id:"sns-onml-subscribe-only",method:"POST",action:"/gp/product/handle-buy-box/ref\x3donml_so_l"},SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES:{name:"sns-onmlv2-add-to-cart",id:"sns-onmlv2-add-to-cart",method:"POST",action:"/gp/subscribe-and-save/atc/sns-atc.html"},JUST_SUBSCRIBE_FORM_ATTRIBUTES:{name:"sns-onmlv2-just-subscribe",id:"sns-onmlv2-just-subscribe",
method:"POST",action:"/gp/subscribe-and-save/pipeline/subscribe.html"},SNS_ATC_DECLARATIVE:"#addToCart_feature_div #atc-declarative",MOBB_ALTERNATE_OFFERS:"#SecondNewAccordionRow .a-accordion-row-a11y, #ThirdNewAccordionRow .a-accordion-row-a11y",SNS_SUBMIT_SECTION_ID:"#snsSubmitSection",SNS_SWITCH_SUBMIT_SECTION_ID:"#snsSwitchSubmitSection",SNS_BUY_NOW_BUTTON:"#snsBuyNowSubmit",SNS_SUBSCRIBE_ONLY_BUTTON:"#snsSubscribeOnlySubmit",SNS_DECLARATIVE_ACTION:"#sns-submit-declarative",SNS_SUBSCRIBE_ONLY_ACTION:"sns-subscribe-only",
SNS_BUY_BOX_PARAMS:"sns-buybox-message-params",SNS_BUY_BOX_PARAM_MAP:"buyboxMessageParamsMap",SNS_SELECT_DELIVERY_URL:"/gp/subscribe-and-save/dp/delivery.html/ref\x3drcxsubs_sns_delivery_url?app-nav-type\x3dmodal",SNS_SELECT_DELIVERY_OPTION_ID:"#snsDeliveryOption",SNS_DELIVERY_OPTION_SNS:"sns",SNS_DELIVERY_OPTION_ONML:"onml",SNS_BASE_PRICE:"#sns-base-price",SNS_TIERED_PRICE:"#sns-tiered-price",SNS_DELIVERY_OPTION_DIV:"#snsDeliveryOpt",ONML_DELIVERY_OPTION_DIV:"#onmlDeliveryOpt",SNS_DELIVERY_OPTION_SNS_BUTTON_TEXT:"#sns-button-text",
SNS_DELIVERY_OPTION_ONML_BUTTON_TEXT:"#onml-button-text",SNS_DELIVERY_OPTION_SNS_LINK:"#sns-delivery-link",SNS_DELIVERY_OPTION_ONML_LINK:"#onml-delivery-link",SNS_DELIVERY_BOTTOM_SHEET:"#snsDeliveryDateBottomSheet",SNS_DELIVERY_BOTTOM_SHEET_SPINNER:"#snsDeliveryDateBottomSheetSpinner",SNS_DELIVERY_BOTTOM_SHEET_CONTENT:"#snsDeliveryDateBottomSheetContent",SNS_SUBSCRIBE_SUBMIT_BUTTON:"#rcx-subscribe-submit-button",SNS_DELIVERY_UPSELL:"#sns-delivery-buybox-upsell-message",SNS_DELIVERY_NON_TIERED_UPSELL:"#sns-delivery-buybox-upsell-message-non-tiered",
SNS_DELIVERY_TIERED_UPSELL:"#sns-delivery-buybox-upsell-message-tiered",ONML_DELIVERY_UPSELL:"#onml-delivery-buybox-upsell-message",ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL:"#onml-delivery-buybox-upsell-message-new-or-unrecognized-sns-customer",ONML_DELIVERY_NON_TIERED_UPSELL:"#onml-delivery-buybox-upsell-message-non-tiered",ONML_DELIVERY_TIERED_UPSELL:"#onml-delivery-buybox-upsell-message-tiered",SNS_ADD_TO_CART_FORM:"#sns-onmlv2-add-to-cart",JUST_SUBSCRIBE_FORM:"#sns-onmlv2-just-subscribe",SNS_DELIVERY_PILL:"#sns-delivery-pill",
SNS_DELIVERY_NON_TIERED_PILL:"#sns-delivery-non-tiered-pill",SNS_DELIVERY_TIERED_PILL:"#sns-delivery-tiered-pill",ONML_DELIVERY_PILL:"#onml-delivery-pill",ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL:"#onml-delivery-new-or-unrecognized-sns-customer-pill",ONML_DELIVERY_NON_TIERED_PILL:"#onml-delivery-non-tiered-pill",ONML_DELIVERY_TIERED_PILL:"#onml-delivery-tiered-pill",SNS_TOGGLE_BUY_BOX:"[name\x3dtoggleBuyBox]",SNS_ONMLV2_JOIN_PRIME_UPSELL:"#momAEmsg",SNS_ONMLV2_JOIN_PRIME_CHECKBOX:"#chkMom",SNS_ONMLV2_JOIN_PRIME_BUTTON:"#mom-join-button",
SNS_BUYBOX_SELECTOR:"#snsBuyBox",SNS_DELIVERY_BOTTOMSHEET_IN_BUYBOX:"#snsBuyBox #snsDeliveryDateBottomSheet",SNS_SWITCH_WIDGET_ONML_URL:"/gp/subscribe-and-save/myd/switchWidgetMobile?",SNS_SWITCH_WIDGET_LEGACY_URL:"/gp/subscribe-and-save/myd/switchWidgetLegacy?",SNS_SWITCH_WIDGET_LEGACY_CONTINUE_URL:"/gp/subscribe-and-save/pipeline/subscribe.html?",SNS_SWITCH_WIDGET_ONML_DESKTOP_URL:"/hz/subscribe-and-save/myd/switchWidgetAjax?",SNS_SWITCH_WIDGET_LEGACY_DESKTOP_URL:"/hz/subscribe-and-save/myd/switchWidgetAjaxLegacy?",
SNS_SWITCH_WIDGET_PARAMS:"sns-switch-message-params",SNS_SWITCH_WIDGET_PARAM_MAP:"switchMessageParamsMap"}});n.when("A","sns-utils","sns-constants","sns-buybox-constants","sns-messaging-utils","sns-atc-utils").register("sns-frequency-bottom-sheet",function(d,b,c,a,e,h){return{init:function(){function g(){var b=f(a.SNS_FREQUENCY_FORM_FIELD).val();f(a.SNS_FREQ_BOTTOMSHEET_SELECTOR).find("button[value\x3d"+b+"]").click()}var f=d.$;b.isMobileDevice()&&(b.registerCallbackForNameSpace(c.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE,
g),b.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,g),d.declarative("sns-frequency-selected","click",function(g){var l=f(a.SNS_FREQUENCY_FORM_FIELD);g=g.$target;var m=g.val(),q={};q[a.SNS_FREQUENCY_NAME]=m;h.setOnmlDeclaratives(q);l.val(m);p.setTimeout(function(){d.trigger(a.SNS_DATA_UPDATE_EVENT)},0);f(a.SNS_FIRST_RECURRING_DELIVERY_DATE).html(g.data("frdd-label"));f(a.SNS_SELECTED_FREQUENCY_LABEL).html(g.data("freq-button-label"));e.updateMessages(m);b.setOnmlUserPref(c.USER_PREFS_KEYS.SNS_FREQUENCY,
m)}))}}});n.when("A","sns-constants","sns-utils","sns-buybox-constants","sns-messaging-utils","sns-atc-utils").register("sns-frequency-popover",function(d,b,c,a,e,h){return{init:function(){function g(){var b=f(a.SNS_FREQUENCY_FORM_FIELD).val();f("[data-a-accordion-row-name\x3dfrequencyAccordionRow"+(b-1)+"] a").click()}var f=d.$;c.isMobileDevice()||(c.registerCallbackForNameSpace(b.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE,g),d.on("a:accordion:sns-dp-frequency-accordion:select",function(g){var l=
f(a.SNS_FREQUENCY_FORM_FIELD),m=f(a.SNS_DP_FREQUENCY_TRIGGER),q=f(g.selectedRow.$row[0]);g=q.data().frequencyLabel;var q=q.data().frequencyValue,t={};t[a.SNS_FREQUENCY_NAME]=q;h.setOnmlDeclaratives(t);l.val(q);p.setTimeout(function(){d.trigger(a.SNS_DATA_UPDATE_EVENT)},0);m.text(g);e.updateMessages(q);c.setOnmlUserPref(b.USER_PREFS_KEYS.SNS_FREQUENCY,q)}))}}});n.when("A","sns-utils","sns-constants","sns-buybox-utils","sns-buybox-constants","sns-atc-utils","sns-atc-login").register("sns-opt-in-checkbox",
function(d,b,c,a,e,h,g){return{init:function(){function f(f){var m=d.$(e.SNS_OPT_IN_CHECKBOX).is(":checked"),q=d.$(e.SNS_OPT_IN_FORM_FIELD);if(m&&(b.isMobileApp()||b.isTabletApp())){var k=h.getAddToCartStrings();g.signInIfNotSignedIn(k,f&&f.snsOnLoad)}f={};f[e.SNS_OPT_IN_NAME]=m;h.setOnmlDeclaratives(f);q.val(m);p.setTimeout(function(){d.trigger(e.SNS_DATA_UPDATE_EVENT)},0);p.setTimeout(function(){a.updateAddToCartButtonLabel(m);a.updateOneClickButtonLabel(m);a.updateBuyNowButtonLabel(m)},0);a.showSnSMerchantInfoIfSnSOptInChecked(m);
a.showGoldBoxDiscountMessageIfSnSOptInChecked(m);a.showSubscribeOnlyButtonIfSnSOptInChecked(m);b.setOnmlUserPref(c.USER_PREFS_KEYS.SNS_OPT_IN,m)}function k(){var a=function(){var a=d.$("#buybox").find(".a-declarative").has("#add-to-cart-button");if(1===a.length)return a;a=d.$("#atc-declarative");return 1===a.length?a:null}();a&&a.click(function(){var c=h.getAddToCartData();if(c.inputs[e.SNS_OPT_IN_NAME]!==r){var f=b.getAStateFromDom(e.SNS_OPT_IN_FEATURE_DIV,"sns-add-to-cart-params","addToCartParams"),
g=d.$(e.SNS_OPT_IN_CHECKBOX).is(":checked"),k={},k=f||{};k[e.SNS_OPT_IN_NAME]=g;var x=a.data("awMash");Object.keys(k).forEach(function(a){x.inputs[a]!==c.inputs[a]&&(x.inputs[a]=c.inputs[a])})}})}(b.isMobileApp()||b.isTabletApp())&&g.setValuesFromUrlParamsIfPresent();b.isSnSEligible()&&f({snsOnLoad:!0});d.declarative("sns-opt-in-checked","change",f);b.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,f);b.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,b.enableSnSOptIn);b.isMobileApp()&&
(b.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,k),k());b.enableSnSOptIn()}}});n.when("A","sns-constants","sns-buybox-constants","sns-utils").register("sns-messaging-utils",function(d,b,c,a){var e=function(a,b){var f=a.firstRecurringDeliveryDates[b-1];d.$(c.SNS_ONML_FRDD).each(function(){d.$(this).html(f)})};return{updateMessages:function(h){var g=a.getAStateFromDom(c.SNS_OPT_IN_FEATURE_DIV,"sns-buybox-message-params","buyboxMessageParamsMap");if(g){var f=d.$(c.SNS_ONML_BUYBOX_UPSELL_MESSAGE_NON_TIERED),
k=d.$(c.SNS_ONML_BUYBOX_UPSELL_MESSAGE_TIERED),l=d.$(c.SNS_DISCOUNT_PILL_POPOVER_TIERED),m=d.$(c.SNS_DISCOUNT_PILL_POPOVER_NON_TIERED);g.tieredStatusOnRecurringDeliveryDates[h-1]===b.TIERED?(f.addClass("aok-hidden"),k.removeClass("aok-hidden"),m.addClass("aok-hidden"),l.removeClass("aok-hidden")):(f.removeClass("aok-hidden"),k.addClass("aok-hidden"),m.removeClass("aok-hidden"),l.addClass("aok-hidden"));f=g.discountType;k=d.$(c.SNS_DISCOUNT_PILL);g.tieredStatusOnRecurringDeliveryDates[h-1]===b.TIERED?
(k.attr("data-tiered-level",b.PREMIUM),f===b.ZERO_BASE&&k.removeClass("aok-hidden")):(k.attr("data-tiered-level",b.BASE),f===b.ZERO_BASE&&k.addClass("aok-hidden"));e(g,h)}}}});n.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper").register("sns-buy-now",function(d,b,c,a){var e=d.$;d.declarative("sns-buy-now","click",function(h){if(!a.isSnsLocked()){h=c.isMobileDevice()?e(b.MOBILE_ADD_TO_CART_DIV).find(b.SNS_OPT_IN_INPUT_ID):c.isWeb()?e(b.ADD_TO_CART_DIV).find(b.SNS_OPT_IN_INPUT_ID):
e(b.TABLET_ADD_TO_CART_DIV).find(b.SNS_OPT_IN_INPUT_ID);var g=e(b.SNS_SUBMIT_SECTION_ID);h.attr("value","true");var f=d.$(b.QUANTITY_CONTAINER).find(b.QUANTITY),k=f.val(),l=c.isMobileDevice()?d.$(b.SNS_MOBILE_QUANTITY):d.$(b.QUANTITY_CONTAINER).find(b.SNS_QUANTITY);f.val(l.val());var l=c.isMobileDevice()?d.$(b.MOBILE_ADD_TO_CART_DIV).find(b.OFFER_LISTING_FIELD):c.isWeb()?d.$(b.ADD_TO_CART_DIV).find(b.OFFER_LISTING_FIELD):d.$(b.TABLET_ADD_TO_CART_DIV).find(b.OFFER_LISTING_FIELD),m=l.val(),q=c.isMobileDevice()?
d.$(b.MOBILE_ADD_TO_CART_DIV).find(b.SNS_OFFER_LISTING_FIELD):c.isWeb()?d.$(b.ADD_TO_CART_DIV).find(b.SNS_OFFER_LISTING_FIELD):d.$(b.TABLET_ADD_TO_CART_DIV).find(b.SNS_OFFER_LISTING_FIELD);l.val(q.val());e(b.TABLET_ADD_TO_CART_DIV).find(b.LEGACY_SPC_FORM_INPUT).remove();e(b.TABLET_ADD_TO_CART_DIV).find(b.LEGACY_SPC_FORM_INPUT_X).remove();g.html('\x3cinput type\x3d"submit" name\x3d"submit.buy-now" id\x3d"snsBuyNowSubmit"\x3e\x3cinput type\x3d"hidden" name\x3d"submit.buy-now" value\x3d"1"\x3e');e(b.SNS_BUY_NOW_BUTTON).parents("form").submit();
f.val(k);l.val(m);h.attr("value","false");g.html("")}})});n.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper").register("sns-subscribe-only",function(d,b,c,a){function e(a,b){return'\x3cinput type\x3d"hidden" name\x3d"'+a+'" value\x3d"'+b+'"\x3e'}d.declarative("sns-subscribe-only","click",function(h){if(!a.isSnsLocked()){h=d.$("\x3cform\x3e",{method:b.JUST_SUBSCRIBE_FORM_ATTRIBUTES.method,action:b.JUST_SUBSCRIBE_FORM_ATTRIBUTES.action,id:b.JUST_SUBSCRIBE_FORM_ATTRIBUTES.id,name:b.JUST_SUBSCRIBE_FORM_ATTRIBUTES.name});
for(var g=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"rcxOrdFreq"},{name:"snsMerchantID"},{name:"longShipAddressId",fieldName:"snsAddressId"}],f="",k=0;k<g.length;k++)var l=g[k].name,m=g[k].fieldName?g[k].fieldName:l,m=c.isMobileDevice()?d.$(b.MOBILE_ADD_TO_CART_DIV+" [name\x3d"+m+"]").val():c.isWeb()?d.$(b.ADD_TO_CART_DIV+" [name\x3d"+m+"]").val():d.$(b.TABLET_ADD_TO_CART_DIV+" [name\x3d"+m+"]").val(),f=f+e(l,m);g=c.isMobileDevice()?d.$(b.SNS_MOBILE_QUANTITY):d.$(b.QUANTITY_CONTAINER).find(b.SNS_QUANTITY);
f+=e("quantity",g.val());f+=e("ref","sns-subscribe-only");f+=e("submit.subscribe-only","1");h.html(f);d.$("body").append(h);d.$(b.JUST_SUBSCRIBE_FORM).submit();d.$(b.JUST_SUBSCRIBE_FORM).remove()}})});n.when("A","sns-onmlv2-utils","sns-onmlv2-message-utils","sns-buybox-constants","sns-constants","a-modal","sns-priceblock-constants","sns-onmlv2-priceblock-utils").register("sns-select-delivery",function(d,b,c,a,e,h,g,f){var k=d.$,l;d.declarative("sns-delivery-date","click",function(c){if(c=b.getBuyboxMessageParam()){var f=
b.generateUrlParams(c),d=k(a.SNS_SUBMIT_SECTION_ID);l=h.create(d,{url:f,header:c.deliveryModalTitle,name:"sns-delivery-modal"});l.show()}});d.declarative("sns-delivery-cancel-btn","click",function(a){l.hide()});d.declarative("sns-delivery-change-btn","click",function(g){if(g=b.getBuyboxMessageParam()){k(a.SNS_DELIVERY_OPTION_DIV).is(":checked")?(b.setDeliveryOption(e.DELIVERY_OPTION.SNS),d.declarative.remove(a.SNS_DECLARATIVE_ACTION),d.declarative.create(a.SNS_DECLARATIVE_ACTION,a.SNS_SUBSCRIBE_ONLY_ACTION)):
k(a.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(b.setDeliveryOption(e.DELIVERY_OPTION.ONML),d.declarative.remove(a.SNS_DECLARATIVE_ACTION),d.declarative.create(a.SNS_DECLARATIVE_ACTION,b.getOnmlDeclarativeAction()));var h=b.getDeliveryOption();g=b.getBuyboxMessageParam();var t=k(a.SNS_FREQUENCY_FORM_FIELD).val();c.updateUpsellMessages(h,g,t);c.updateFirstRecurringDeliveryDate(g,t);c.updateDiscountPill(h,g,t);f.updateDesktopPriceBlock(g);f.updateBuyboxPriceBlock(g);f.updateBuyboxDeliveryOption(g);l.hide()}});
d.on("a:popover:beforeHide:sns-delivery-modal",function(b){h.remove(k(a.SNS_SUBMIT_SECTION_ID))})});n.when("A","sns-onmlv2-utils","sns-onmlv2-message-utils","sns-buybox-constants","sns-constants","a-sheet","sns-onmlv2-priceblock-utils").register("sns-select-delivery-bottom-sheet",function(d,b,c,a,e,h,g){var f=d.$,k;d.declarative("sns-delivery-date-bottom-sheet","click",function(c){if(c=b.getBuyboxMessageParam()){var d=f(a.SNS_DELIVERY_BOTTOMSHEET_IN_BUYBOX);if(d.length||k){var g=b.generateUrlParams(c);
f.get(g,function(b){f(a.SNS_DELIVERY_BOTTOM_SHEET_SPINNER).addClass("aok-hidden");f(a.SNS_DELIVERY_BOTTOM_SHEET_CONTENT).removeClass("aok-hidden");f(a.SNS_DELIVERY_BOTTOM_SHEET_CONTENT).html(b)});f(a.SNS_DELIVERY_BOTTOM_SHEET_SPINNER).removeClass("aok-hidden");f(a.SNS_DELIVERY_BOTTOM_SHEET_CONTENT).addClass("aok-hidden");d.length&&(k&&(k.$container.remove(),k=null),k=h.create({name:"sns_delivery_bottom_sheet",preloadDomId:"snsDeliveryDateBottomSheet",height:270,closeType:"message",closeMessage:c.bottomSheetCloseMessage,
sheetType:"web"}));k.show()}}});d.on("a:sheet:beforeHide:sns_delivery_bottom_sheet",function(){var l=b.getBuyboxMessageParam();if(l){f(a.SNS_DELIVERY_OPTION_DIV).is(":checked")?(b.setDeliveryOption(e.DELIVERY_OPTION.SNS),d.declarative.remove(a.SNS_DECLARATIVE_ACTION),d.declarative.create(a.SNS_DECLARATIVE_ACTION,a.SNS_SUBSCRIBE_ONLY_ACTION)):f(a.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(b.setDeliveryOption(e.DELIVERY_OPTION.ONML),d.declarative.remove(a.SNS_DECLARATIVE_ACTION),d.declarative.create(a.SNS_DECLARATIVE_ACTION,
b.getOnmlDeclarativeAction()));var h=b.getDeliveryOption(),l=b.getBuyboxMessageParam(),k=f(a.SNS_FREQUENCY_FORM_FIELD_MOBILE).val();c.updateUpsellMessages(h,l,k);c.updateFirstRecurringDeliveryDate(l,k);c.updateDiscountPill(h,l,k);g.updateBuyboxPriceBlock(l);g.updateBuyboxDeliveryOption(l)}})});n.when("A","sns-buybox-constants","sns-priceblock-constants").register("sns-onmlv2-priceblock-utils",function(d,b,c){var a=d.$;return{updateDesktopPriceBlock:function(d){if(d){var h=d.zeroBaseDiscount,g=0<a(b.SNS_TOGGLE_BUY_BOX).length,
f=0<a(c.DP_STRIKE_PRICE).length;a(b.SNS_DELIVERY_OPTION_DIV).is(":checked")?(a(c.ONE_NOW_SHIPPING_MESSAGE).addClass("aok-hidden"),d.justSubscribeTieredStatus?(a(c.SNS_TIERED_PRICE).removeClass("aok-hidden"),a(c.SNS_BASED_PRICE).addClass("aok-hidden"),a(c.SNS_TIERED_SAVINGS).removeClass("aok-hidden"),a(c.SNS_BASED_SAVINGS).addClass("aok-hidden"),a(c.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),a(c.SNS_SAVINGS_ROW).removeClass("aok-hidden")):h?(a(c.SNS_TIERED_PRICE).addClass("aok-hidden"),a(c.SNS_BASED_PRICE).removeClass("aok-hidden"),
a(c.SNS_SAVINGS_ROW).addClass("aok-hidden")):(a(c.SNS_TIERED_PRICE).addClass("aok-hidden"),a(c.SNS_BASED_PRICE).removeClass("aok-hidden"),a(c.SNS_TIERED_SAVINGS).addClass("aok-hidden"),a(c.SNS_BASED_SAVINGS).removeClass("aok-hidden"),a(c.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),a(c.SNS_SAVINGS_ROW).removeClass("aok-hidden"))):a(b.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(a(c.ONE_NOW_SHIPPING_MESSAGE).removeClass("aok-hidden"),h?(a(c.SNS_TIERED_PRICE).addClass("aok-hidden"),a(c.SNS_BASED_PRICE).removeClass("aok-hidden"),
a(c.SNS_SAVINGS_ROW).addClass("aok-hidden"),f&&(a(b.SNS_TIERED_PRICE).hasClass("aok-hidden")?(a(c.SNS_SAVINGS_ROW).removeClass("aok-hidden"),a(c.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),a(c.SNS_BASED_SAVINGS).removeClass("aok-hidden"),a(c.SNS_TIERED_SAVINGS).addClass("aok-hidden")):a(b.SNS_BASE_PRICE).hasClass("aok-hidden")&&(a(c.SNS_SAVINGS_ROW).removeClass("aok-hidden"),a(c.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),a(c.SNS_TIERED_SAVINGS).removeClass("aok-hidden"),a(c.SNS_BASED_SAVINGS).addClass("aok-hidden")))):
(a(c.SNS_TIERED_PRICE).addClass("aok-hidden"),a(c.SNS_BASED_PRICE).removeClass("aok-hidden"),a(c.SNS_TIERED_SAVINGS).addClass("aok-hidden"),a(c.SNS_BASED_SAVINGS).removeClass("aok-hidden"),a(c.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),a(c.SNS_SAVINGS_ROW).removeClass("aok-hidden")));g&&a(c.SNS_SAVINGS_ROW).addClass("aok-hidden")}},updateBuyboxPriceBlock:function(d){d&&(a(b.SNS_DELIVERY_OPTION_DIV).is(":checked")?(d.oneNowDiscountEligible||a(c.SNS_STRIKETHROUGH_PRICE).removeClass("aok-hidden"),
d.justSubscribeTieredStatus?(a(b.SNS_BASE_PRICE).addClass("aok-hidden"),a(b.SNS_TIERED_PRICE).removeClass("aok-hidden")):(a(b.SNS_BASE_PRICE).removeClass("aok-hidden"),a(b.SNS_TIERED_PRICE).addClass("aok-hidden"))):a(b.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(a(b.SNS_BASE_PRICE).removeClass("aok-hidden"),a(b.SNS_TIERED_PRICE).addClass("aok-hidden"),d.oneNowDiscountEligible||(a(c.SNS_STRIKETHROUGH_PRICE).addClass("aok-hidden"),a(c.SNS_BASED_SAVINGS).addClass("aok-hidden"))))},updateBuyboxDeliveryOption:function(c){c&&
(a(b.SNS_DELIVERY_OPTION_DIV).is(":checked")?(a(b.SNS_DELIVERY_OPTION_ONML_BUTTON_TEXT).addClass("aok-hidden"),a(b.SNS_DELIVERY_OPTION_SNS_BUTTON_TEXT).removeClass("aok-hidden"),a(b.SNS_DELIVERY_OPTION_ONML_LINK).addClass("aok-hidden"),a(b.SNS_DELIVERY_OPTION_SNS_LINK).removeClass("aok-hidden"),a(b.SNS_SELECT_DELIVERY_OPTION_ID).val(b.SNS_DELIVERY_OPTION_SNS)):a(b.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(a(b.SNS_SELECT_DELIVERY_OPTION_ID).addClass("aok-hidden"),a(b.SNS_DELIVERY_OPTION_SNS_BUTTON_TEXT).addClass("aok-hidden"),
a(b.SNS_DELIVERY_OPTION_ONML_BUTTON_TEXT).removeClass("aok-hidden"),a(b.SNS_DELIVERY_OPTION_SNS_LINK).addClass("aok-hidden"),a(b.SNS_DELIVERY_OPTION_ONML_LINK).removeClass("aok-hidden"),a(b.SNS_SELECT_DELIVERY_OPTION_ID).val(b.SNS_DELIVERY_OPTION_ONML)))}}});n.when("A","sns-buybox-constants","sns-constants").register("sns-onmlv2-message-utils",function(d,b,c){var a=d.$;return{updateFirstRecurringDeliveryDate:function(c,d){if(c&&d){var g=c.firstRecurringDeliveryDates[d-1];a(b.SNS_ONMLV2_FRDD).each(function(){a(this).html(g)})}},
updateUpsellMessages:function(d,h,g){if(d&&h&&g){var f=h.snsCustomer,k=h.suppressSnSOneNowOption||!1,l=h.justSubscribeTieredStatus;h=h.tieredStatusOnRecurringDeliveryDates[g-1]===c.TIERED;d===c.DELIVERY_OPTION.SNS?(a(b.SNS_DELIVERY_UPSELL).removeClass("aok-hidden"),a(b.ONML_DELIVERY_UPSELL).addClass("aok-hidden"),f||k?l?(a(b.SNS_DELIVERY_NON_TIERED_UPSELL).addClass("aok-hidden"),a(b.SNS_DELIVERY_TIERED_UPSELL).removeClass("aok-hidden")):(a(b.SNS_DELIVERY_NON_TIERED_UPSELL).removeClass("aok-hidden"),
a(b.SNS_DELIVERY_TIERED_UPSELL).addClass("aok-hidden")):(a(b.SNS_DELIVERY_NON_TIERED_UPSELL).addClass("aok-hidden"),a(b.SNS_DELIVERY_TIERED_UPSELL).addClass("aok-hidden")),a(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).addClass("aok-hidden"),a(b.ONML_DELIVERY_NON_TIERED_UPSELL).addClass("aok-hidden"),a(b.ONML_DELIVERY_TIERED_UPSELL).addClass("aok-hidden")):d===c.DELIVERY_OPTION.ONML?(a(b.SNS_DELIVERY_UPSELL).addClass("aok-hidden"),a(b.ONML_DELIVERY_UPSELL).removeClass("aok-hidden"),f?h?(a(b.SNS_DELIVERY_NON_TIERED_UPSELL).addClass("aok-hidden"),
a(b.SNS_DELIVERY_TIERED_UPSELL).addClass("aok-hidden"),a(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).addClass("aok-hidden"),a(b.ONML_DELIVERY_NON_TIERED_UPSELL).addClass("aok-hidden"),a(b.ONML_DELIVERY_TIERED_UPSELL).removeClass("aok-hidden")):(a(b.SNS_DELIVERY_NON_TIERED_UPSELL).addClass("aok-hidden"),a(b.SNS_DELIVERY_TIERED_UPSELL).addClass("aok-hidden"),a(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).addClass("aok-hidden"),a(b.ONML_DELIVERY_NON_TIERED_UPSELL).removeClass("aok-hidden"),a(b.ONML_DELIVERY_TIERED_UPSELL).addClass("aok-hidden")):
(a(b.SNS_DELIVERY_NON_TIERED_UPSELL).addClass("aok-hidden"),a(b.SNS_DELIVERY_TIERED_UPSELL).addClass("aok-hidden"),a(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).removeClass("aok-hidden"),a(b.ONML_DELIVERY_NON_TIERED_UPSELL).addClass("aok-hidden"),a(b.ONML_DELIVERY_TIERED_UPSELL).addClass("aok-hidden"))):(a(b.SNS_DELIVERY_UPSELL).addClass("aok-hidden"),a(b.ONML_DELIVERY_UPSELL).addClass("aok-hidden"),a(b.SNS_DELIVERY_NON_TIERED_UPSELL).addClass("aok-hidden"),a(b.SNS_DELIVERY_TIERED_UPSELL).addClass("aok-hidden"),
a(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).addClass("aok-hidden"),a(b.ONML_DELIVERY_NON_TIERED_UPSELL).addClass("aok-hidden"),a(b.ONML_DELIVERY_TIERED_UPSELL).addClass("aok-hidden"))}},updateDiscountPill:function(d,h,g){if(d&&h&&g){var f=h.snsCustomer,k=h.suppressSnSOneNowOption||!1,l=h.justSubscribeTieredStatus;g=h.tieredStatusOnRecurringDeliveryDates[g-1]===c.TIERED;h=h.zeroBaseDiscount;d===c.DELIVERY_OPTION.SNS?(a(b.SNS_DELIVERY_PILL).removeClass("aok-hidden"),a(b.ONML_DELIVERY_PILL).addClass("aok-hidden"),
f||k?l?(a(b.SNS_DELIVERY_NON_TIERED_PILL).addClass("aok-hidden"),a(b.SNS_DELIVERY_TIERED_PILL).removeClass("aok-hidden")):(h?a(b.SNS_DELIVERY_NON_TIERED_PILL).addClass("aok-hidden"):a(b.SNS_DELIVERY_NON_TIERED_PILL).removeClass("aok-hidden"),a(b.SNS_DELIVERY_TIERED_PILL).addClass("aok-hidden")):(a(b.SNS_DELIVERY_NON_TIERED_PILL).addClass("aok-hidden"),a(b.SNS_DELIVERY_TIERED_PILL).addClass("aok-hidden")),a(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).addClass("aok-hidden"),a(b.ONML_DELIVERY_NON_TIERED_PILL).addClass("aok-hidden"),
a(b.ONML_DELIVERY_TIERED_PILL).addClass("aok-hidden")):d===c.DELIVERY_OPTION.ONML?(a(b.SNS_DELIVERY_PILL).addClass("aok-hidden"),a(b.ONML_DELIVERY_PILL).removeClass("aok-hidden"),f?g?(a(b.SNS_DELIVERY_NON_TIERED_PILL).addClass("aok-hidden"),a(b.SNS_DELIVERY_TIERED_PILL).addClass("aok-hidden"),a(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).addClass("aok-hidden"),a(b.ONML_DELIVERY_NON_TIERED_PILL).addClass("aok-hidden"),a(b.ONML_DELIVERY_TIERED_PILL).removeClass("aok-hidden")):(a(b.SNS_DELIVERY_NON_TIERED_PILL).addClass("aok-hidden"),
a(b.SNS_DELIVERY_TIERED_PILL).addClass("aok-hidden"),a(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).addClass("aok-hidden"),h?a(b.ONML_DELIVERY_NON_TIERED_PILL).addClass("aok-hidden"):a(b.ONML_DELIVERY_NON_TIERED_PILL).removeClass("aok-hidden"),a(b.ONML_DELIVERY_TIERED_PILL).addClass("aok-hidden")):(a(b.SNS_DELIVERY_NON_TIERED_PILL).addClass("aok-hidden"),a(b.SNS_DELIVERY_TIERED_PILL).addClass("aok-hidden"),h?a(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).addClass("aok-hidden"):a(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).removeClass("aok-hidden"),
a(b.ONML_DELIVERY_NON_TIERED_PILL).addClass("aok-hidden"),a(b.ONML_DELIVERY_TIERED_PILL).addClass("aok-hidden"))):(a(b.SNS_DELIVERY_PILL).addClass("aok-hidden"),a(b.ONML_DELIVERY_PILL).addClass("aok-hidden"),a(b.SNS_DELIVERY_NON_TIERED_PILL).addClass("aok-hidden"),a(b.SNS_DELIVERY_TIERED_PILL).addClass("aok-hidden"),a(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).addClass("aok-hidden"),a(b.ONML_DELIVERY_NON_TIERED_PILL).addClass("aok-hidden"),a(b.ONML_DELIVERY_TIERED_PILL).addClass("aok-hidden"))}}}});
n.when("A","sns-onmlv2-utils","sns-buybox-constants","sns-onmlv2-message-utils").register("sns-onmlv2-frequency-update",function(d,b,c,a){var e=d.$;d.on(c.SNS_ONMLV2_FREQUENCY_TRIGGER_DESKTOP,function(d){d=b.getDeliveryOption();var g=b.getBuyboxMessageParam(),f=e(c.SNS_FREQUENCY_FORM_FIELD).val();g&&(d===r&&(b.setDeliveryOption(g.deliveryOption),d=b.getDeliveryOption()),a.updateUpsellMessages(d,g,f),a.updateFirstRecurringDeliveryDate(g,f),a.updateDiscountPill(d,g,f))});e(c.SNS_ONMLV2_FREQUENCY_TRIGGER_MOBILE).change(function(c){var d=
b.getDeliveryOption(),f=b.getBuyboxMessageParam();c=c.target.value;f&&(d===r&&(b.setDeliveryOption(f.deliveryOption),d=b.getDeliveryOption()),a.updateUpsellMessages(d,f,c),a.updateFirstRecurringDeliveryDate(f,c),a.updateDiscountPill(d,f,c))})});n.register("sns-priceblock-constants",function(){return{PRICEBLOCK_SNSPRICE_ROW:"#priceblock_snsprice_row",SNS_UPSELL:"#priceblock_snsupsell_row",SNS_SAVINGS:"#snsprice_savings",DP_OUR_PRICE:"#priceblock_ourprice",DP_OUR_PRICE_LABEL:"#priceblock_ourprice_lbl",
DP_OUR_PRICE_SAVINGS:"#regularprice_savings",DP_OUR_PRICE_BADGING:"#ourprice_fbabadge",DP_OUR_PRICE_SHIPPING:"#ourprice_shippingmessage",DP_OUR_PRICE_PPU:"#priceblock_ourprice_row #priceblock_ourprice+.a-size-small",DP_STRIKE_PRICE:"#price .a-text-strike",DP_SALE_PRICE:"#priceblock_saleprice",DP_SALE_PRICE_LABEL:"#priceblock_saleprice_lbl",DP_SALE_PRICE_SHIPPING:"#saleprice_shippingmessage",DP_SALE_PRICE_PPU:"#priceblock_saleprice_row #priceblock_saleprice+.a-size-small",DP_DEAL_PRICE:"#priceblock_dealprice",
DP_DEAL_PRICE_SAVINGS:"#dealprice_savings",DP_DEAL_PRICE_SHIPPING:"#dealprice_shippingmessage",DP_DEAL_PRICE_PPU:"#priceblock_dealprice_row #priceblock_dealprice+.a-size-small",SNS_PITCH_PRICE_UPSELL_TEXT:"#onmlPriceBlockUpsellText",SNS_ATF_REDESIGN_UPSELL_UNCHECKED:"#onml-atf-redesign-upsell-unchecked",SNS_ATF_REDESIGN_UPSELL_CHECKED:"#onml-atf-redesign-upsell-checked",ONML_ATF_REDESIGN_UPSELL:"#onml-atf-redesign-upsell",SNS_PITCH_PRICE_FEATURE:"#snsPitchPrice_feature_div",NEW_PITCH_PRICE_FEATURE:"#newPitchPriceWrapper_feature_div",
MOBILE_OUR_PRICE_SHIPPING:"#ourPrice_availability",SHIPPING_DETAILS:'[data-a-sheet*\x3d"shippingDetailsDisplayContent"]',SNS_TIERED_PRICE:"#unifiedPrice_feature_div #priceblock_snsprice_Tiered, #snsPrice #priceblock_snsprice_Tiered",SNS_BASED_PRICE:"#unifiedPrice_feature_div #priceblock_snsprice_Based, #snsPrice #priceblock_snsprice_Based",SNS_TIERED_SAVINGS:"#unifiedPrice_feature_div #snsSavings_Tiered, #snsPrice #snsSavings_Tiered",SNS_BASED_SAVINGS:"#unifiedPrice_feature_div #snsSavings_NonTiered, #snsPrice #snsSavings_NonTiered",
SNS_SAVINGS_LABEL:"#unifiedPrice_feature_div #snsSavings_lbl",SNS_SAVINGS_ROW:"#unifiedPrice_feature_div #priceblock_snsSavings_row, #snsPrice #priceblock_snsSavings_row",ONE_NOW_SHIPPING_MESSAGE:"#priceblock_oneNowShippingMessage, #priceblock_oneNowShippingMessage_dpv2",SNS_STRIKETHROUGH_PRICE:"#snsStrikeThroughPrice"}});n.when("A","sns-utils","sns-constants","sns-price-utils","sns-buybox-constants","sns-priceblock-constants").register("sns-price-refresh",function(d,b,c,a,e,h){return{init:function(){d.declarative("sns-opt-in-checked",
"change",function(){a.showSnSPriceIfSnSOptInChecked()});b.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,a.showSnSPriceIfSnSOptInChecked);a.showSnSPriceIfSnSOptInChecked();d.$(e.SNS_BUY_NEW_BUTTON).click(function(){var a=e.SNS_OPT_IN_CHECKBOX,g=b.getOnmlUserPref(c.USER_PREFS_KEYS.SNS_OPT_IN),l=h.SNS_UPSELL,m=h.SNS_PITCH_PRICE_UPSELL_TEXT,q=h.ONML_ATF_REDESIGN_UPSELL;d.$(a).is(":checked")!==g&&(d.$(a).click(),b.setOnmlUserPref(c.USER_PREFS_KEYS.SNS_OPT_IN,g));d.$(q).removeClass("aok-hidden");
!1===d.$(a).is(":checked")&&(d.$(l).removeClass("aok-hidden"),d.$(m).removeClass("aok-hidden"))});d.$(e.SNS_BUY_USED_BUTTON).click(function(){g()});d.$(e.MOBB_ALTERNATE_OFFERS).click(function(){g()});var g=function(){var a=e.SNS_OPT_IN_CHECKBOX,g=b.getOnmlUserPref(c.USER_PREFS_KEYS.SNS_OPT_IN),l=h.SNS_UPSELL,m=h.SNS_PITCH_PRICE_UPSELL_TEXT,q=h.ONML_ATF_REDESIGN_UPSELL;!0===g&&(d.$(a).click(),b.setOnmlUserPref(c.USER_PREFS_KEYS.SNS_OPT_IN,!0));d.$(q).addClass("aok-hidden");d.$(l).addClass("aok-hidden");
d.$(m).addClass("aok-hidden")}}}});n.when("A","sns-utils","sns-priceblock-constants","sns-buybox-constants").register("sns-price-utils",function(d,b,c,a){var e=d.$,h=c.SNS_PITCH_PRICE_UPSELL_TEXT,g=c.SNS_PITCH_PRICE_FEATURE,f=c.NEW_PITCH_PRICE_FEATURE,k=c.PRICEBLOCK_SNSPRICE_ROW,l=a.SNS_OPT_IN_CHECKBOX,m=c.SNS_UPSELL,q=c.SNS_SAVINGS,t=c.DP_OUR_PRICE,p=c.DP_OUR_PRICE_LABEL,x=c.DP_OUR_PRICE_SAVINGS,n=c.DP_OUR_PRICE_BADGING,y=c.DP_OUR_PRICE_SHIPPING,z=c.DP_SALE_PRICE,A=c.DP_SALE_PRICE_LABEL,r=c.DP_SALE_PRICE_SHIPPING,
w=c.DP_DEAL_PRICE,u=c.DP_DEAL_PRICE_SAVINGS,v=c.DP_DEAL_PRICE_SHIPPING,B=c.MOBILE_OUR_PRICE_SHIPPING,C=c.SHIPPING_DETAILS,D=a.SNS_BUY_NEW_PRICE,E=a.NON_CBB_BUY_NEW_PRICE,F=a.CBB_BUY_NEW_PRICE,G=a.SNS_PRICE_IN_BUY_USED_SECTION,H=a.CBB_SNS_BUY_NEW_PRICE,I=a.DPV2_BUY_NEW_PRICE,J=c.SNS_ATF_REDESIGN_UPSELL_CHECKED,K=c.SNS_ATF_REDESIGN_UPSELL_UNCHECKED;return{showSnSPriceIfSnSOptInChecked:function(){b.isSnSEligible()&&(e(l).is(":checked")?b.shouldShowPrice()&&(e(k).length?(e(k).removeClass("aok-hidden"),
e(q).removeClass("a-hidden"),e(m).addClass("aok-hidden"),e(x).addClass("a-hidden"),e(n).addClass("a-hidden"),e(y).addClass("a-hidden"),e(B).addClass("a-hidden"),e(t).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price"),e(p).addClass("onml-price-inactive"),e(z).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price "),e(A).addClass("onml-price-inactive"),e(r).addClass("a-hidden"),
e(w).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price"),e(u).addClass("a-hidden"),e(v).addClass("a-hidden"),e(k).css({display:"table-row",visibility:"visible"}),e(k).prev().has(C).addClass("aok-hidden"),e(E).addClass("aok-hidden"),e(D).removeClass("aok-hidden"),e(F).addClass("aok-hidden"),e(G).addClass("aok-hidden"),e(H).removeClass("aok-hidden"),e(I).addClass("aok-hidden")):(e(h).addClass("aok-hidden"),e(f).addClass("aok-hidden"),
e(g).removeClass("aok-hidden"),e(g).css({display:"block",visibility:"visible"}),e(J).removeClass("aok-hidden"),e(K).addClass("aok-hidden"))):e(k).length?(e(k).addClass("aok-hidden"),e(q).addClass("a-hidden"),e(m).removeClass("aok-hidden"),e(x).removeClass("a-hidden"),e(n).removeClass("a-hidden"),e(y).removeClass("a-hidden"),e(B).removeClass("a-hidden"),e(t).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),e(p).removeClass("onml-price-inactive"),
e(z).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),e(A).removeClass("onml-price-inactive"),e(r).removeClass("a-hidden"),e(w).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),e(u).removeClass("a-hidden"),e(v).removeClass("a-hidden"),e(k).prev().has(C).removeClass("aok-hidden"),e(E).removeClass("aok-hidden"),e(D).addClass("aok-hidden"),e(F).removeClass("aok-hidden"),
e(G).addClass("aok-hidden"),e(H).addClass("aok-hidden"),e(I).removeClass("aok-hidden")):(e(h).removeClass("aok-hidden"),e(f).removeClass("aok-hidden"),e(g).addClass("aok-hidden"),e(h).css({display:"block",visibility:"visible"}),e(K).removeClass("aok-hidden"),e(J).addClass("aok-hidden")))}}});n.when("A","sns-constants","sns-buybox-constants","sns-states-loaded-in-dom").register("sns-utils",function(d,b,c){var a=d.$,e={},h={},g=function(b,c,d){var f,g=function(b){if(!b||"object"===typeof b)return b;
var d=a.parseJSON;p.JSON&&p.JSON.parse&&(d=JSON.parse);try{return"string"===typeof b?d(b):null}catch(f){return p.ueLogError&&p.ueLogError(f,{logLevel:"ERROR",attribution:"sns",message:"An error occurred when getting onml parameters from page-state. a-state: "+c}),null}};b=a(b||"html");return 1<=b.length&&(b=b.find("script[data-a-state*\x3d'"+c+"']"))&&1<=b.length?(f=g(b.first().text()),g("object"===typeof f?f[d]:null)):f},f=function(a){var b=g(c.SNS_OPT_IN_FEATURE_DIV,"sns-onml-params","onmlParams");
return a?b&&b[a]:b},k=function(){var a=f("deviceType"),c=h[b.USER_PREFS_KEYS.ONML_PARAMS],c=c&&c.deviceType;return a||c};return{isSnSEligible:function(){return f("snsEligible")},getAStateFromDom:g,getOnmlParam:f,shouldShowPrice:function(){return f("showPrice")},getDeviceType:k,registerCallbackForNameSpace:function(a,b){e[a]||(e[a]=[]);-1===e[a].indexOf(b)&&e[a].push(b)},executeCallbacksForNameSpace:function(a){if((a=e[a])&&a.constructor===Array)for(var b=0;b<a.length;b++)a[b]()},setOnmlUserPref:function(a,
b){h[a]=b},getOnmlUserPref:function(a){return h[a]},deleteOnmlUserPref:function(a){delete h[a]},isMobileDevice:function(){var a=k();return"mobile"===a||"mobileApp"===a},isMobileApp:function(){return"mobileApp"===k()},isTabletApp:function(){var a=k();return"iPad"===a||"tabletApp"===a||"tabletLargeApp"===a},isVerucaBuyNowEnabled:function(){return f("verucaBuyNowEnabled")},isVerucaOneClickEnabled:function(){return f("verucaOneClickEnabled")},enableSnSOptIn:function(){a(c.SNS_OPT_IN_CHECKBOX).removeAttr("disabled")},
isSnsCustomer:function(){return f("snsCustomer")}}});n.when("A","sns-buybox-constants","sns-constants").register("sns-onmlv2-utils",function(d,b,c){var a=d.$,e,h=function(b,c,d){var f,g=function(b){if(!b||"object"===typeof b)return b;var d=a.parseJSON;p.JSON&&p.JSON.parse&&(d=JSON.parse);try{return"string"===typeof b?d(b):null}catch(f){return p.ueLogError&&p.ueLogError(f,{logLevel:"ERROR",attribution:"sns",message:"An error occurred when getting onml parameters from page-state. a-state: "+c}),null}};
b=a(b||"html");return 1<=b.length&&(b=b.find("script[data-a-state*\x3d'"+c+"']"))&&1<=b.length?(f=g(b.first().text()),g("object"===typeof f?f[d]:null)):f},g=function(){return h(r,b.SNS_BUY_BOX_PARAMS,b.SNS_BUY_BOX_PARAM_MAP)},f=function(a){var b=g();return b?b.deviceType===a:!1},k=function(){return f("mobile")||f("mobileApp")},l=function(a,b){return a&&b?a.tieredStatusOnRecurringDeliveryDates[b-1]===c.TIERED:!1},m=function(a,b){return a&&b?a.firstRecurringDeliveryDates[b-1]:""};return{getAStateFromDom:h,
getDeliveryOption:function(){return e},setDeliveryOption:function(a){e=a},getSwitchDeliveryOption:function(){if(e===r){var a=g();a&&(e=a.deliveryOption)}return e},getBuyboxMessageParam:g,isMobileDevice:k,isMobileWeb:function(){return f("mobile")},isMobileApp:function(){return f("mobileApp")},isTabletApp:function(){return f("iPad")||f("tabletApp")||f("tabletLargeApp")},isWeb:function(){return f("web")},isTiered:l,getOnmlFirstRecurringDeliveryDate:m,getOnmlDeclarativeAction:function(){return a("#onmlDeclarativeAction").val()},
generateUrlParams:function(c){if(!c){var d=b.SNS_SELECT_DELIVERY_URL;return d}var f=(k()?a(b.SNS_FREQUENCY_FORM_FIELD_MOBILE):a(b.SNS_FREQUENCY_FORM_FIELD)).val(),g=[];g.subscribeOnlyDate=c.justSubscribeDeliveryDate;g.subscribeOnlyDateShort=c.justSubscribeShortDeliveryDate;g.subscribeOnlyDiscount=c.justSubscribeTieredStatus?c.tieredDiscountPercent:c.baseDiscountPercent;g.onmlDate=c.oneTimeDeliveryDate;g.onmlDateShort=c.oneTimeShortDeliveryDate;g.onmlDiscount=c.baseDiscountPercent;g.onmlNextDate=m(c,
f);g.onmlNextDiscount=l(c,f)?c.tieredDiscountPercent:c.baseDiscountPercent;g.snsDeliveryOption=a(b.SNS_SELECT_DELIVERY_OPTION_ID).val();g.isMobile=k();g.snscsrf=c.deliveryModalCSRFToken;d=b.SNS_SELECT_DELIVERY_URL;Object.keys(g).forEach(function(a){d+="\x26"+a+"\x3d"+encodeURI(g[a])});return d}}});n.when("ready").register("sns-stringify-util",function(){return JSON&&"function"===typeof JSON.stringify?JSON.stringify:function(){var d={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r",
"\t":"\\t"},b=/[\\"\u0000-\u001F\u2028\u2029]/g,c=Object.prototype.toString,a=Array.isArray||function(a){return"[object Array]"===c.call(a)},e=function(a){return d[a]||"\\u"+(a.charCodeAt(0)+65536).toString(16).substr(1)};return function g(d){if(null===d)return"null";if("number"===typeof d)return isFinite(d)?d.toString():"null";if("boolean"===typeof d)return d.toString();if("object"===typeof d){if("function"===typeof d.toJSON)return g(d.toJSON());if(a(d)){for(var k="[",l=0;l<d.length;l++)k+=(l?", ":
"")+g(d[l]);return k+"]"}if("[object Object]"===c.call(d)){k=[];for(l in d)d.hasOwnProperty(l)&&k.push(g(l)+": "+g(d[l]));return"{"+k.join(", ")+"}"}}return'"'+d.toString().replace(b,e)+'"'}}()});n.when("A","sns-stringify-util","ready").register("sns-declarative-util",function(d,b){function c(a){return a&&("object"===typeof a||"object"===typeof a.prototype)}function a(){for(var a=0;a<arguments.length;a++)if("string"!==typeof arguments[a])throw"Function parameter must be of type string.";}function e(){for(var b=
0;b<arguments.length;b++){var d=arguments[b],c=Object.prototype.toString;if((Array.isArray||function(a){return"[object Array]"===c.call(a)})(d)&&0<d.length)for(var e=0;e<d.length;e++)a(d[e]);else throw"Function parameter must be a non empty array.";}}function h(a){var f="data-"+a.getAttribute("data-action"),e=function(){var c=a.getAttribute(f),e=c?d.parseJSON(c):{};e.save=function(){var d=e.save;delete e.save;var c=b(e);a.setAttribute(f,c);e.save=d};return e};return{hasExactKeyHeirarchy:function(a,
b){var d=e();a=a.split(".");for(var g=0<a.length,f=0;f<a.length&&g;f++)var h=a[f],g=c(d)&&d.hasOwnProperty(h),d=d[h];g&&b!==r&&(g=d===b);return g},hasParsableJSON:function(){try{return e().save(),!0}catch(a){return!1}},put:function(a){var b=e();c(b.inputs)||(b.inputs={});d.$.each(a,function(a,d){b.inputs[a]=d});b.save()},getData:e}}return{query:function(b){e(b);var f=[],k=[],l=[],m,q,p=function(){return{numberOfMatchingActions:f.length,allMatchKeyValue:function(b,d){a(b);for(var c=0<this.numberOfMatchingActions,
g=0;g<this.numberOfMatchingActions&&c;g++)c=(c=f[g])&&c.hasExactKeyHeirarchy(b,d);return c},putAll:function(a){for(var b=0;b<this.numberOfMatchingActions;b++)f[b].put(a)},getStrings:function(){for(var a=0;a<this.numberOfMatchingActions;a++){var b=f[a];if(b.getData().strings)return b.getData().strings}return[]},getData:function(){for(var a=0;a<this.numberOfMatchingActions;a++){var b=f[a];if(b.getData())return b.getData()}return[]}}},n=function(){for(var a=d.$("#buybox").find(".a-declarative").get(),
e=0<k.length,m=0;m<a.length;m++){var q=a[m],n;a:{n=q;for(var r=b,w=0;w<r.length;w++){var u;var v=n;u=r[w];c(v)&&"string"===typeof u?(v=v.getAttribute("data-action")||"",u=0===u.localeCompare(v)):u=!1;if(u){n=!0;break a}}n=!1}if(n&&(q=h(q),q.hasParsableJSON()))if(e){n=!0;for(r=0;r<k.length&&n;r++)n=q.hasExactKeyHeirarchy(k[r],l[r]);n&&f.push(q)}else f.push(q)}return p()};m=function(b){a(b);k.push(b);return{equals:q,equalsAny:function(){return q(r)}}};q=function(a){l.push(a);return{where:m,execute:n}};
return{where:m,execute:n}}}});n.when("A","sns-utils","sns-buybox-constants","sns-declarative-util").register("sns-atc-utils",function(d,b,c,a){var e=d.$,h=["aw-mash","add-to-cart","one-click","show-services-interstitial"],g=function(b){a.query(h).where("buttonID").equals("add-to-cart").execute().putAll(b);a.query(h).where("buttonID").equals("buy-now").execute().putAll(b);a.query(h).where("buttonID").equals("buy-now-one-click").execute().putAll(b)};return{initializeOnmlDeclaratives:function(){if(b.isSnSEligible()){var a=
b.getAStateFromDom(c.SNS_OPT_IN_FEATURE_DIV,"sns-add-to-cart-params","addToCartParams");g(a||{});e("\x3cinput type\x3dhidden value\x3dtrue \x3e").prop("id",c.SNS_ONML_INIT_INPUT_ID).appendTo(c.SNS_OPT_IN_FEATURE_DIV)}},setOnmlDeclaratives:g,getAddToCartStrings:function(){return a.query(h).where("buttonID").equals("add-to-cart").execute().getStrings()},getAddToCartData:function(){return a.query(h).where("buttonID").equals("add-to-cart").execute().getData()}}});n.when("A","sns-utils","sns-constants",
"sns-atc-utils").register("sns-atc",function(d,b,c,a){return{init:function(){b.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,a.initializeOnmlDeclaratives);a.initializeOnmlDeclaratives()}}});n.when("A","sns-utils","sns-buybox-constants","sns-metrics-constants").register("sns-atc-login",function(d,b,c,a){function e(a){var b=p.location.search.substring(1);return decodeURIComponent(b).split("\x26").map(function(a){return a.split("\x3d")}).filter(function(b){return b[0]===a}).map(function(a){return a[1]})[0]||
r}var h=function(a){function b(d){amazon.mash.showAlert({title:a.aa_mash_encounter_problem,message:d,buttonTitles:[a.aa_mash_ok],successCallback:function(a){},failCallback:function(a){console.log(a)}})}amazon.mash.showLoginDialog({successCallback:function(){var a=d.$(c.SNS_QUANTITY_FIELD).val(),b=d.$(c.SNS_FREQUENCY_FORM_FIELD).val(),a={snsQty:a,snsOptIn:!0,snsFreq:b},a=d.$.param(a),b=location.href,b=-1<b.indexOf("?")?b+("\x26"+a):b+("?"+a);p.location.href=b},failCallback:function(a){"CANCELED"!==
a?b(a):(a=c.SNS_OPT_IN_CHECKBOX,!0===d.$(a).is(":checked")&&d.$(a).click())}})},g=function(){!0===d.$(c.SNS_OPT_IN_CHECKBOX).is(":checked")&&d.$(c.SNS_OPT_IN_CHECKBOX).click()};return{setValuesFromUrlParamsIfPresent:function(){var a=e("snsOptIn");a&&"true"===a&&(b.enableSnSOptIn(),!1===d.$(c.SNS_OPT_IN_CHECKBOX).is(":checked")&&d.$(c.SNS_OPT_IN_CHECKBOX).click());(a=e("snsFreq"))&&(b.isMobileApp()?d.$(c.SNS_FREQ_BOTTOMSHEET_SELECTOR).find("button[value\x3d"+a+"]").click():b.isTabletApp()&&d.$("[data-a-accordion-row-name\x3dfrequencyAccordionRow"+
(a-1)+"] a").click());(a=e("snsQty"))&&d.$(c.SNS_QUANTITY_FIELD).val(a)},signInIfNotSignedIn:function(b,c){d.$.ajax({url:"/gp/subscribe-and-save/ajax/requireSignIn.html",success:function(d){1===d.requireSignIn&&(c?(g(),p.ue&&p.ue.count(a.SNS_CUSTOMER_RECOGNIZED_BUT_NOT_SIGNED_IN,(ue.count(a.SNS_CUSTOMER_RECOGNIZED_BUT_NOT_SIGNED_IN)||0)+1)):(h(b),p.ue&&p.ue.count(a.SNS_SIGN_IN_IF_NOT_ALREADY_SIGNED_IN_METRICS,(ue.count(a.SNS_SIGN_IN_IF_NOT_ALREADY_SIGNED_IN_METRICS)||0)+1)))},error:function(b,d,c){g();
p.ue&&p.ue.count(a.SNS_REQUIRE_SIGN_IN_STATUS_FAILED,(ue.count(a.SNS_REQUIRE_SIGN_IN_STATUS_FAILED)||0)+1)}})}}});n.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper").register("sns-onmlv2-atc",function(d,b,c,a){function e(a,b){return'\x3cinput type\x3d"hidden" name\x3d"'+a+'" value\x3d"'+b+'"\x3e'}function h(g){if(!a.isSnsLocked()){for(var f=d.$("\x3cform\x3e",{method:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.method,action:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.action,id:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.id,
name:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.name}),h=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"rcxOrdFreq"},{name:"snsOnmlOfferId"},{name:"snsMostCommonFrequency"},{name:"snsAddressId"}],l="",m=0;m<h.length;m++)var q=h[m].name,n=h[m].fieldName?h[m].fieldName:q,n=c.isMobileDevice()?d.$(b.MOBILE_ADD_TO_CART_DIV+" [name\x3d"+n+"]").val():c.isWeb()?d.$(b.ADD_TO_CART_DIV+" [name\x3d"+n+"]").val():d.$(b.TABLET_ADD_TO_CART_DIV+" [name\x3d"+n+"]").val(),l=l+e(q,n);h=c.isMobileDevice()?
d.$(b.SNS_MOBILE_QUANTITY):d.$(b.QUANTITY_CONTAINER).find(b.SNS_QUANTITY);l+=e("quantity",h.val());l+=e("ref",g);l+=e("submit.add-to-cart","1");f.html(l);d.$("body").append(f);d.$(b.SNS_ADD_TO_CART_FORM).submit();d.$(b.SNS_ADD_TO_CART_FORM).remove()}}d.declarative("sns-add-to-cart","click",function(a){h("onmlv2_atc")});return{createAndSubmitAddToCartForm:h}});n.when("A","sns-utils","sns-constants","sns-buybox-constants","sns-atc-utils").register("sns-buybox-utils",function(d,b,c,a){var e=function(a){if(0<
a.length)return a.innerWidth()<a[0].scrollWidth},h=function(a,e,h){e=a+"_"+(h?"checkedLabel":"uncheckedLabel")+"_"+("oneClick"===a?e:"all");a=b.getOnmlParam(e);e=(h=b.getOnmlUserPref(c.USER_PREFS_KEYS.ONML_PARAMS))&&h[e];if(a=a||e)return d.$("\x3cp\x3e"+a+"\x3c/p\x3e").text()};return{updateOneClickButtonLabel:function(c){if(b.isVerucaOneClickEnabled()){c="boolean"===typeof c?c:d.$(a.SNS_OPT_IN_CHECKBOX).is(":checked");var f=d.$(a.ONE_CLICK_BUTTON),k=d.$(a.ONE_CLICK_BUTTON_ICON),l=d.$(a.ONE_CLICK_BUTTON_TEXT),
m=b.getDeviceType(),q=h("oneClick",m,!0),m=h("oneClick",m,!1);q&&m&&(c?(l.text(q),e(l)&&(k.addClass("aok-hidden"),f.removeClass("a-button-icon"))):(l.text(m),k.length&&(f.addClass("a-button-icon"),k.removeClass("aok-hidden"))))}},updateBuyNowButtonLabel:function(c){if(b.isVerucaBuyNowEnabled()){c="boolean"===typeof c?c:d.$(a.SNS_OPT_IN_CHECKBOX).is(":checked");var f=d.$(a.BUY_NOW_BUTTON),k=d.$(a.BUY_NOW_BUTTON_ICON),l=d.$(a.BUY_NOW_BUTTON_TEXT),m=b.getDeviceType(),q=h("buyNow",m,!0),m=h("buyNow",
m,!1);q&&m&&(c?(l.text(q),e(l)&&(k.addClass("aok-hidden"),f.removeClass("a-button-icon"))):(l.text(m),k.length&&(f.addClass("a-button-icon"),k.removeClass("aok-hidden"))))}},updateAddToCartButtonLabel:function(c){c="boolean"===typeof c?c:d.$(a.SNS_OPT_IN_CHECKBOX).is(":checked");var f=d.$(a.ADD_TO_CART_BUTTON).closest(".a-button"),k=f.find(".a-button-inner"),l=f.find("i.a-icon"),m=f.find("span.a-button-text"),q=b.getDeviceType(),n=h("addToCart",q,!0),q=h("addToCart",q,!1);n&&q&&(c?(m.text(n),k.addClass("sns-onml-sky-button-inner"),
m.addClass("sns-onml-sky-button-text"),e(m)&&(l.addClass("aok-hidden"),f.removeClass("a-button-icon"))):(m.text(q),k.removeClass("sns-onml-sky-button-inner"),m.removeClass("sns-onml-sky-button-text"),l.length&&(f.addClass("a-button-icon"),l.removeClass("aok-hidden"))))},showSnSMerchantInfoIfSnSOptInChecked:function(b){var c=d.$(a.SNS_ONML_MERCHANT_INFO);b="boolean"===typeof b?b:d.$(a.SNS_OPT_IN_CHECKBOX).is(":checked");c.toggleClass("aok-hidden",!b)},showGoldBoxDiscountMessageIfSnSOptInChecked:function(b){var c=
d.$(a.GOLDBOX_DISCOUNT_MESSAGE);b="boolean"===typeof b?b:d.$(a.SNS_OPT_IN_CHECKBOX).is(":checked");c.toggleClass("aok-hidden",!b)},showSubscribeOnlyButtonIfSnSOptInChecked:function(b){var c=d.$(a.JUST_SUBSCRIBE_DIV);b="boolean"===typeof b?b:d.$(a.SNS_OPT_IN_CHECKBOX).is(":checked");c.toggleClass("aok-hidden",!b)}}});n.when("A","sns-buybox-constants","sns-onmlv2-utils","ready").register("sns-onmlv2-join-prime",function(d,b,c){var a=d.$,e=function(){a(b.SNS_ONMLV2_JOIN_PRIME_CHECKBOX).length&&(a(b.SNS_ONMLV2_JOIN_PRIME_UPSELL).removeClass("aok-hidden"),
a(b.SNS_ONMLV2_JOIN_PRIME_CHECKBOX).is(":checked")?(a(b.SNS_ONMLV2_JOIN_PRIME_BUTTON).removeClass("aok-hidden"),a(b.SNS_SUBSCRIBE_SUBMIT_BUTTON).addClass("aok-hidden")):(a(b.SNS_ONMLV2_JOIN_PRIME_BUTTON).addClass("aok-hidden"),a(b.SNS_SUBSCRIBE_SUBMIT_BUTTON).removeClass("aok-hidden")))};e();a(document).delegate(b.SNS_ONMLV2_JOIN_PRIME_CHECKBOX,"change",function(a){e()})});n.register("sns-constants",function(){return{TIERED:"tiered",NON_TIERED:"nonTiered",BASE:"BASE",PREMIUM:"PREMIUM",ZERO_BASE:"ZERO_BASE",
EVENT_NAMESPACE:{PAGE_UPDATE:"pageUpdate",FREQUENCY_HIDDEN_INPUT_CHANGE:"frequencyHiddenInputChange"},USER_PREFS_KEYS:{SNS_OPT_IN:"snsOptIn",SNS_FREQUENCY:"rcxOrdFreq",ONML_PARAMS:"onmlParams"},DELIVERY_OPTION:{SNS:"sns",ONML:"onml"}}});n.when("A","sns-utils","sns-constants","sns-buybox-constants").register("sns-event-handler",function(d,b,c,a){return{init:function(){function e(b){for(var c=d.$("\x3cform\x3e",{method:a.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.method,action:a.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.action,
id:a.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.id,name:a.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.name}),e=[{name:"ASIN"},{name:"offerListingID"},{name:"merchantID"},{name:"rcxOrdFreq"},{name:"snsOfferListingID"},{name:"snsMerchantID"}],k="",l=0;l<e.length;l++)var m=e[l].name,q=d.$("[name\x3d"+m+"]").val(),k=k+('\x3cinput type\x3d"hidden" name\x3d"'+m+'" value\x3d"'+q+'"\x3e');k=k+('\x3cinput type\x3d"hidden" name\x3d"ref" value\x3d"'+b+'"\x3e')+'\x3cinput type\x3d"hidden" name\x3d"submit.rcx-subscribe" value\x3d"1"\x3e';
b=d.$(a.QUANTITY_CONTAINER).find(a.QUANTITY);k+='\x3cinput type\x3d"hidden" name\x3d"quantity" value\x3d"'+b.val()+'"\x3e';c.html(k);d.$("body").append(c);d.$(a.SUBSCRIBE_ONLY_FORM).submit()}b.isSnSEligible()&&b.setOnmlUserPref(c.USER_PREFS_KEYS.ONML_PARAMS,b.getOnmlParam());b.registerCallbackForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE,function(){var e=b.getOnmlUserPref(c.USER_PREFS_KEYS.ONML_PARAMS)||{},g=e.asin,f=b.getOnmlParam("asin");e.asin=f;b.setOnmlUserPref(c.USER_PREFS_KEYS.ONML_PARAMS,e);
e=g!==f;g=b.getOnmlUserPref(c.USER_PREFS_KEYS.SNS_OPT_IN);"undefined"!==typeof g&&d.$(a.SNS_OPT_IN_CHECKBOX).is(":checked")!==g&&(b.enableSnSOptIn(),d.$(a.SNS_OPT_IN_CHECKBOX).click());(g=b.getOnmlUserPref(c.USER_PREFS_KEYS.SNS_FREQUENCY))&&!e?b.isMobileDevice()?d.$(a.SNS_FREQ_BOTTOMSHEET_SELECTOR).find("button[value\x3d"+g+"]").click():d.$("[data-a-accordion-row-name\x3dfrequencyAccordionRow"+(g-1)+"] a").click():b.deleteOnmlUserPref(c.USER_PREFS_KEYS.SNS_FREQUENCY)});d.$(a.SNS_FREQUENCY_FORM_FIELD).change(function(){b.executeCallbacksForNameSpace(c.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE)});
d.on("a:pageUpdate",function(){b.executeCallbacksForNameSpace(c.EVENT_NAMESPACE.PAGE_UPDATE)});d.declarative("subscribe-only","click",function(a){e("onml_so_l")});d.declarative("just-subscribe","click",function(a){e("onml_justsub_l")})}}});n.register("sns-metrics-constants",function(){return{SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS:"snsOnmlExistingSnsCustomerCheck",SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS:"snsOnmlNewSnsCustomerCheck",SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS:"snsOnmlExistingSnsCustomerUncheck",
SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS:"snsOnmlNewSnsCustomerUncheck",SNS_SIGN_IN_IF_NOT_ALREADY_SIGNED_IN_METRICS:"snsSignInIfNotAlreadySignedIn",SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS:"snsOnmlFrequencyLabelClick",SNS_ONML_FREQUENCY_CHANGE_METRICS:"snsOnmlFrequencyChange",SNS_ONML_UPSELL_MESSAGE_METRICS:"snsOnmlUpsellMessage",SNS_ONML_SUBSCRIBE_ONLY_METRICS:"snsOnmlSubscribeOnly",SNS_CUSTOMER_RECOGNIZED_BUT_NOT_SIGNED_IN:"snsOnmlCustomerRecognizedButNotSignedIn",SNS_REQUIRE_SIGN_IN_STATUS_FAILED:"snsOnmlRequireSignInStatusFailed",
SNS_ONMLV2_POPOVER_TRIGGERS:"justSubscribeLearnMorePopoverNonTiered justSubscribeLearnMorePopoverTiered onmlv2LearnMorePopoverNonTiered onmlv2LearnMorePopoverTiered onmlv2LearnMorePopoverNewOrUnrecognized justSubscribePillPopoverNonTiered justSubscribePillPopoverTiered onmlv2PillPopoverNonTiered onmlv2PillPopoverTiered onmlv2PillPopoverNewOrUnrecognized".split(" "),SNS_ONMLV2_BOTTOMSHEET_TRIGGERS:"justSubscribeLearnMoreBottomsheetNonTiered justSubscribeLearnMoreBottomsheetTiered onmlv2LearnMoreBottomsheetNonTiered onmlv2LearnMoreBottomsheetTiered onmlv2LearnMoreBottomsheetNewOrUnrecognized justSubscribePillBottomsheetNonTiered justSubscribePillBottomsheetTiered onmlv2PillBottomsheetNonTiered onmlv2PillBottomsheetTiered onmlv2PillBottomsheetNewOrUnrecognized".split(" "),
SNS_ONMLV2_DESKTOP_POPOVER_SHOW_METRICS:"snsOnmlv2DesktopPopoverShow",SNS_ONMLV2_MOBILE_BOTTOMSHEET_SHOW_METRICS:"snsOnmlv2MobileBottomsheetShow",SNS_ONMLV2_DELIVERY_OPTION_CLICK_METRICS:"snsOnmlv2DeliveryOptionClick",SNS_ONMLV2_DELIVERY_OPTION_CLICK_MOBILE_METRICS:"snsOnmlv2DeliveryOptionClickMobile",SNS_ONMLV2_SWITCH_TO_SNS_METRICS:"snsOnmlv2SwitchToSns",SNS_ONMLV2_SWITCH_TO_ONML_METRICS:"snsOnmlv2SwitchToOnml",SNS_ONMLV2_SWITCH_TO_SNS_MOBILE_METRICS:"snsOnmlv2SwitchToSnsMobile",SNS_ONMLV2_SWITCH_TO_ONML_MOBILE_METRICS:"snsOnmlv2SwitchToOnmlMobile",
SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_METRICS:"snsOnmlv2SubscribeNowWithOnmlDelivery",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_METRICS:"snsOnmlv2SubscribeNowWithSnsDelivery",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_MOBILE_METRICS:"snsOnmlv2SubscribeNowWithOnmlDeliveryMobile",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_MOBILE_METRICS:"snsOnmlv2SubscribeNowWithSnsDeliveryMobile",SNS_QUANTITY_SELECT_DESKTOP:"snsQuantitySelectDesktop",SNS_QUANTITY_SELECT_MOBILE:"snsQuantitySelectMobile",SNS_SWITCH_WIDGET_SEE_PRODUCTS_ONMLV2_METRICS:"snsSwitchWidgetSeeProductsOnmlv2",
SNS_SWITCH_WIDGET_SEE_PRODUCTS_LEGACY_METRICS:"snsSwitchWidgetSeeProductsLegacy",SNS_SWITCH_WIDGET_CONTINUE_LEGACY_METRICS:"snsSwitchWidgetContinueLegacy",SNS_SWITCH_WIDGET_CONTINUE_WITH_ONE_NOW_METRICS:"snsSwitchWidgetContinueWithOneNow",SNS_SWITCH_WIDGET_CONTINUE_WITH_SNS_METRICS:"snsSwitchWidgetContinueWithSns",SNS_SWITCH_WIDGET_BOTTOMSHEET_TOTAL_COUNT_METRICS:"snsSwitchWidgetBottomsheetTotalCount"}});n.when("A","sns-utils","sns-metrics-constants","sns-buybox-constants").register("sns-metrics-helper",
function(d,b,c,a){return{init:function(){d.declarative("sns-opt-in-checked","change",function(){var e=d.$(a.SNS_OPT_IN_CHECKBOX).is(":checked");p.ue&&(e?b.isSnsCustomer()?p.ue.count(c.SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS,(ue.count(c.SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS)||0)+1):p.ue.count(c.SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS,(ue.count(c.SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS)||0)+1):b.isSnsCustomer()?p.ue.count(c.SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS,(ue.count(c.SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS)||
0)+1):p.ue.count(c.SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS,(ue.count(c.SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS)||0)+1))});d.$(document).delegate(".sns-buybox-upsell-trigger","click",function(a){p.ue&&p.ue.count(c.SNS_ONML_UPSELL_MESSAGE_METRICS,(ue.count(c.SNS_ONML_UPSELL_MESSAGE_METRICS)||0)+1)});d.$(document).delegate("#sns-dp-frequency-trigger","click",function(a){p.ue&&p.ue.count(c.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS,(ue.count(c.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS)||0)+1)});d.$(document).delegate("#snsSelectedFrequencyLabel",
"click",function(a){p.ue&&p.ue.count(c.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS,(ue.count(c.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS)||0)+1)});d.on("a:accordion:sns-dp-frequency-accordion:select",function(){p.ue&&p.ue.count(c.SNS_ONML_FREQUENCY_CHANGE_METRICS,(ue.count(c.SNS_ONML_FREQUENCY_CHANGE_METRICS)||0)+1)});d.$(document).delegate("#snsFrequencyBottomSheet button","click",function(a){p.ue&&p.ue.count(c.SNS_ONML_FREQUENCY_CHANGE_METRICS,(ue.count(c.SNS_ONML_FREQUENCY_CHANGE_METRICS)||0)+1)});d.$(document).delegate("#subscribe-only",
"click",function(a){p.ue&&p.ue.count(c.SNS_ONML_SUBSCRIBE_ONLY_METRICS,(ue.count(c.SNS_ONML_SUBSCRIBE_ONLY_METRICS)||0)+1)})}}});n.when("A","sns-onmlv2-utils","sns-metrics-constants","sns-buybox-constants","sns-constants","sns-onmlv2-cache").register("sns-onmlv2-metrics-helper",function(d,b,c,a,e,h){var g=d.$,f="",k="";c.SNS_ONMLV2_POPOVER_TRIGGERS.forEach(function(a){f+=" a:popover:beforeShow:"+a});c.SNS_ONMLV2_BOTTOMSHEET_TRIGGERS.forEach(function(a){k+=" a:sheet:beforeShow:"+a});d.declarative("sns-delivery-date",
"click",function(a){h.incrementDeliveryOptionClickCounter()});d.declarative("sns-delivery-date-bottom-sheet","click",function(a){h.incrementDeliveryOptionClickCounterMobile()});d.declarative("sns-delivery-change-btn","click",function(b){g(a.SNS_DELIVERY_OPTION_DIV).is(":checked")?(h.incrementDeliveryOptionSwitchToSnsCounter(),h.setDeliveryOption(e.DELIVERY_OPTION.SNS)):g(a.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(h.incrementDeliveryOptionSwitchToOnmlCounter(),h.setDeliveryOption(e.DELIVERY_OPTION.ONML))});
d.on("a:popover:beforeHide:sns-delivery-modal",function(a){m(c.SNS_ONMLV2_DELIVERY_OPTION_CLICK_METRICS,h.getDeliveryOptionClickCounter());m(c.SNS_ONMLV2_SWITCH_TO_SNS_METRICS,h.getDeliveryOptionSwitchToSnsCounter());m(c.SNS_ONMLV2_SWITCH_TO_ONML_METRICS,h.getDeliveryOptionSwitchToOnmlCounter());m(c.SNS_QUANTITY_SELECT_DESKTOP,h.getQuantityClickCounterDesktop())});d.on("a:sheet:beforeHide:sns_delivery_bottom_sheet",function(){m(c.SNS_ONMLV2_DELIVERY_OPTION_CLICK_MOBILE_METRICS,h.getDeliveryOptionClickCounterMobile());
g(a.SNS_DELIVERY_OPTION_DIV).is(":checked")?(h.incrementDeliveryOptionSwitchToSnsCounterMobile(),h.setDeliveryOption(e.DELIVERY_OPTION.SNS)):g(a.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(h.incrementDeliveryOptionSwitchToOnmlCounterMobile(),h.setDeliveryOption(e.DELIVERY_OPTION.ONML));m(c.SNS_ONMLV2_SWITCH_TO_SNS_MOBILE_METRICS,h.getDeliveryOptionSwitchToSnsCounterMobile());m(c.SNS_ONMLV2_SWITCH_TO_ONML_MOBILE_METRICS,h.getDeliveryOptionSwitchToOnmlCounterMobile());m(c.SNS_QUANTITY_SELECT_MOBILE,
h.getQuantityClickCounterMobile())});d.on(f,function(){l(c.SNS_ONMLV2_DESKTOP_POPOVER_SHOW_METRICS)});d.on(k,function(){l(c.SNS_ONMLV2_MOBILE_BOTTOMSHEET_SHOW_METRICS)});d.$(document).delegate("#sns-submit-declarative","click",function(a){a=h.getDeliveryOption();var d=b.isMobileDevice();a===e.DELIVERY_OPTION.SNS?d?l(c.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_MOBILE_METRICS):l(c.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_METRICS):a===e.DELIVERY_OPTION.ONML&&(d?l(c.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_MOBILE_METRICS):
l(c.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_METRICS))});d.$(document).delegate(a.SNS_ONMLV2_QUANTITY_TRIGGER_DESKTOP,"change",function(a){h.incrementQuantityClickCounterDesktop();m(c.SNS_QUANTITY_SELECT_DESKTOP,h.getQuantityClickCounterDesktop())});d.$(document).delegate(a.SNS_ONMLV2_QUANTITY_TRIGGER_MOBILE,"change",function(a){h.incrementQuantityClickCounterMobile();m(c.SNS_QUANTITY_SELECT_MOBILE,h.getQuantityClickCounterMobile())});var l=function(a){p.ue&&p.ue.count(a,(ue.count(a)||0)+1)},m=
function(a,b){p.ue&&p.ue.count(a,b)}});n.when("A","sns-onmlv2-utils","sns-buybox-constants").register("sns-onmlv2-cache",function(d,b,c){var a=0,e=0,h=0,g=0,f=0,k=0,l,m=0,n=0;return{getDeliveryOptionClickCounter:function(){return a},incrementDeliveryOptionClickCounter:function(){a++},getDeliveryOptionClickCounterMobile:function(){return e},incrementDeliveryOptionClickCounterMobile:function(){e++},getDeliveryOptionSwitchToSnsCounter:function(){return h},incrementDeliveryOptionSwitchToSnsCounter:function(){h++},
getDeliveryOptionSwitchToSnsCounterMobile:function(){return g},incrementDeliveryOptionSwitchToSnsCounterMobile:function(){g++},getDeliveryOptionSwitchToOnmlCounterMobile:function(){return k},incrementDeliveryOptionSwitchToOnmlCounterMobile:function(){k++},getDeliveryOptionSwitchToOnmlCounter:function(){return f},incrementDeliveryOptionSwitchToOnmlCounter:function(){f++},getDeliveryOption:function(){if(l)return l;var a=b.getBuyboxMessageParam();return a?l=a=a.deliveryOption:"error"},setDeliveryOption:function(a){l=
a},getQuantityClickCounterDesktop:function(){return m},incrementQuantityClickCounterDesktop:function(a){m++},getQuantityClickCounterMobile:function(){return n},incrementQuantityClickCounterMobile:function(a){n++}}});n.when("sns-atc","sns-frequency-bottom-sheet","sns-frequency-popover","sns-opt-in-checkbox","sns-event-handler","sns-metrics-helper","sns-price-refresh").execute("sns-execute",function(d,b,c,a,e,h,g){d.init();b.init();c.init();a.init();e.init();h.init();g.init()});n.register("sns-moq-helper",
function(d){return{isSnsLocked:function(){return!1}}})});