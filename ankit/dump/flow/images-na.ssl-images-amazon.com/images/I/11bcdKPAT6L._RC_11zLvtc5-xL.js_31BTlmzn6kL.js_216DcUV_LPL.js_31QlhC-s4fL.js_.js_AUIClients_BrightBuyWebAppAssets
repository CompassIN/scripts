(function(c){var e=window.AmazonUIPageJS||window.P,f=e._namespace||e.attributeErrors,b=f?f("BrightBuyWebAppAssets@common","BrightBuyWebAppAssets"):e;b.guardFatal?b.guardFatal(c)(b,window):b.execute(function(){c(b,window)})})(function(c,e,f){c.register("bb-configuration-variants",function(){return{platform:"none"}});"use strict";c.declare("bb-configuration-weblabs-detailpage",{isDetailPageFeatureEnabled:function(){return!1}});"use strict";c.when("A").register("bb-configuration-debug",function(b){return{_cache:b.state("bb-debug-context"),
context:function(){var a=this._cache;a||(a=(this._cache=b.state("bb-debug-context"))||{});return a}}});"use strict";c.when("A","3p-lodash","bb-configuration-weblabs-detailpage").register("bb-configuration-features",function(b,a,d){return a.assign({},{context:function(){return b.state("bb-wl-context")}},d)});"use strict";c.when("A").register("bb-configuration-page",function(b){return{_cache:b.state("bb-page-context"),context:function(){var a=this._cache;a||(a=(this._cache=b.state("bb-page-context"))||
{});return a}}});"use strict";c.when("bb-configuration-features").register("bb-configuration-stream-base",function(b){return{data:{minItemsPerCall:10,maxItemsPerCall:20,retryOptions:{backoff:[100,200,400]},streamApiUrl:"/bbp/data/stream",sleepDelay:100,apiTimeout:3500},features:b,logging:{namespace:"brightbuy"},state:{streamStateVersion:1},ui:{gapLength:1,minItemWidth:230,numBufferedRows:2,itemHeight:310,remainingHeightForMoreItems:3100,overlayTransparency:.08,animationSpeed:"fast",footerDiv:".nav-bb-footer-mobile, footer.nav-mobile, #rhf, #navFooter"}}});
"use strict";c.when("bb-configuration-stream-base").register("bb-configuration-stream",function(b){return b});"use strict";c.when("A").register("bb-data-api",function(b){return{suppressProducts:function(a){var d=a||{};a=d.suppressionType||"";a="/bbp/api/0.1/suppress/-/${asins}?suppressionType\x3d${suppressionType}".replace("${asins}",d.asins||"").replace("${suppressionType}",a);b.post(a,{success:function(a,b,c){d.success&&d.success(a,b,c)},error:function(a,b,c){d.error&&d.error(a,b,c)}})},recordPageHit:function(a){var d=
a||{};a=d.pageAction||"";var c=d.pageTypeId||"";a="/bbp/api/0.1/hit?ht\x3d${ht}\x26pa\x3d${pa}\x26ptid\x3d${ptid}".replace("${ht}",d.hitType||"").replace("${pa}",a).replace("${ptid}",c);b.get(a,{success:function(a,b,c){d.success&&d.success(a,b,c)},error:function(a,b,c){d.error&&d.error(a,b,c)}})}}})});
/* ******** */
(function(f){var d=window.AmazonUIPageJS||window.P,g=d._namespace||d.attributeErrors,a=g?g("BrightBuyWebAppAssets@feedback","BrightBuyWebAppAssets"):d;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,d,g){f.when("A","a-modal","3p-lodash","westlake-logger","ready").execute(function(a,c,f,d){function h(c){var a={};if(!f.isString(c))return a;c=f.trimStart(c,"?");for(var e,d;null!==(e=k.exec(c));)d=e[2],a[e[1]]=d;return a}var e=a.$,k=/&?([^=]+?)=([^&#]*)/g;(function(){if(location.search&&
location.search.length&&h(location.search).showFeedbackModal){var a=e("#bb-feedback-modal");c.get(a).show()}e("#bb-feedback-modal-link").click(function(){d.increment("bb-feedback-modal-link")})})()});"use strict";f.when("A","jQuery","a-modal","3p-lodash","westlake-logger","ready").register("bb-feedback-form",function(a,c,d,g,h){function e(b){b=c("#"+b);return b.length?a.trim(b.val()):""}function k(b){return c("input[name\x3d'"+b+"']:checked").val()}function r(b){var n="",a=0,d=c("input[name\x3d'"+
b+"']:checked");c.each(d,function(){n+=c(this).val();a+=1;1<d.length&&0<a&&a<d.length&&(n+=", ")});return n}function m(b){return c("#"+b).find("span").text().trim()}function t(){return{page:e("bb-feedback-program-id"),q1:{question:m("bb-feedback-question1-label"),answer:k("bb-feedback-q1")},q2:{question:m("bb-feedback-question2-label"),answer:r("bb-feedback-q2")},comments:e("bb-feedback-message")}}function u(b){return{programId:"BrightBuy",marketplaceId:e("bb-encrypted-marketplace-id"),data:{mysqlData:b}}}
function v(){return c("#bb-feedback-form").attr("data-submit-url")}function p(b){c.each(b,function(b,a){c("#bb-feedback-error-"+a).fadeIn();b=c("#bb-feedback-"+a);b.length&&b.children().addClass("bb-invalid")})}function l(){c(".bb-error").hide();c(".bb-invalid").removeClass("bb-invalid")}function q(){h.increment("bb-feedback-submit-processing-errors");p({processing:"processing"})}function w(){c("#bb-feedback").hide();c("#bb-feedback-info").hide();c("#bb-feedback-thankyou").removeClass("aok-hidden").fadeIn();
d.get("bb-feedback-modal").updatePosition()}function x(b){var a={};b.page&&"string"===typeof b.page&&""!==b.page||(a.page="page");b.q1.question&&"string"===typeof b.q1.question&&""!==b.q1.question||(a.question1="q1");b.q1.answer&&"string"===typeof b.q1.answer&&""!==b.q1.answer||(a.answer1="q1");b.q2.question&&"string"===typeof b.q2.question&&""!==b.q2.question||(a.question2="q2");"string"!==typeof b.q2.answer&&(a.answer2="q2");return a}function y(b){h.increment("bb-feedback-submit-success");l();w()}
function z(){l();var b=v(),a=t(),d=x(a);0<g.keys(d).length?p(d):(a=u(a),a.programId&&"string"===typeof a.programId&&""!==a.programId?c.ajax({type:"POST",url:b,data:JSON.stringify(a),contentType:"application/json",success:y,error:q}):q())}f.when("mash").execute(function(a){});a.declarative("bb-feedback-submit","submit",function(a){a.$event.preventDefault();z()});a.on("a:popover:afterHide:bb-feedback-modal",function(){l()});return{getInputValue:e,getSubmitUrl:v,getParams:u,getQuestion:m,getSelectedRadioButton:k,
getSelectedCheckboxes:r,getFormData:t,hideErrors:l,showErrors:p,showProcessingError:q,showSuccessMessage:w,detectFormProblems:x,handleFeedbackServiceResponse:y,submitFeedback:z}});"use strict";f.when("ready").register("bb-pages-components-feedback-bottomsheet",function(){return{_$topIndicator:null,_$buttonContainer:null,_$showFeedback:!1,initialize:function(a,c){},scroll:function(){}}})});
/* ******** */
(function(g){var n=window.AmazonUIPageJS||window.P,v=n._namespace||n.attributeErrors,a=v?v("BrightBuyWebAppAssets@stream-core","BrightBuyWebAppAssets"):n;a.guardFatal?a.guardFatal(g)(a,window):a.execute(function(){g(a,window)})})(function(g,n,v){g.register("bb-models-range",function(){var a={};(function(a){function b(b,a){this.start=b||0;this.end=a||0}b.prototype.isEqual=function(b){return null!==b&&b.start===this.start&&b.end===this.end};a.Range=b})(a);return a});"use strict";g.when("A","3p-lodash").register("bb-models-stream-request",
function(a,e){return{StreamRequest:a.createClass({init:function(b,a,p){b=e.isString(b)?{cursor:b}:b||{};this.cursor=b.cursor||null;this.start=b.start||a||0;this.count=b.count||p||0},hash:function(){return this.cursor+":"+this.start+":"+this.count},copy:function(){return{cursor:this.cursor,start:this.start,count:this.count}}})}});"use strict";g.when("A","3p-lodash","bb-configuration-stream").register("bb-models-stream-state",function(a,e,b){var g=b.state.streamStateVersion;return{StreamState:a.createClass({init:function(b,
f){e.isString(b)?(this.name=b,this.version=g,this.timestamp=f.timestamp,this.requests={cursors:[],cursor:null},this.responses={},this.yPosition=0):(f=b,this.name=f.name,this.version=f.version,this.timestamp=f.timestamp,this.requests=e.clone(f.requests),this.responses=e.clone(f.responses),this.yPosition=f.yPosition)},toSavableState:function(){return{history:{name:this.name,version:this.version,timestamp:this.timestamp,requests:e.clone(this.requests),yPosition:this.yPosition},storage:{responses:e.clone(this.responses)}}}})}});
"use strict";g.when("bb-models-range","bb-models-stream-request","bb-models-stream-state").register("bb-models",function(a,e,b){return{Range:a.Range,StreamRequest:e.StreamRequest,StreamState:b.StreamState}});"use strict";g.when("A","jQuery","3p-lodash","westlake-core").register("bb-scheduler",function(a,e,b,g){var p=g.Logger;e=a.createClass({_threads:null,_handler:null,name:"",interval:0,init:function(b,c){this._threads=[];this.name=b;this.interval=c;this.run=this.run.bind(this)},schedule:function(f,
c){this._threads.push({name:f,thread:c});b.isNil(this._handler)&&(this._handler=a.interval(this.run,this.interval))},deschedule:function(f){b.remove(this._threads,function(b){return b.name===f})},contains:function(f){return b.some(this._threads,{name:f})},run:function(){for(var b=this._threads.length,c=0;c<b;c++){var a=this._threads[c];try{a.thread.call()}catch(d){p.error("The thread '"+a.name+"' threw an exception.",d,"brightbuy")}}}});return new (a.createClass({Priority:{VeryLow:"veryLow",Low:"low",
Medium:"medium",High:"high",VeryHigh:"veryHigh"},_pools:{veryLow:new e("veryLow",1E3),low:new e("low",200),medium:new e("medium",100),high:new e("high",50),veryHigh:new e("veryHigh",16)},init:function(){},contains:function(a,c){return b.has(this._pools,c)?this._pools[c].contains(a):!1},schedule:function(a,c,e){b.has(this._pools,a)?this._pools[a].schedule(c,e):(p.warn("The thread '"+c+"' does not have a valid schedule priority.",null,"brightbuy"),this._pools.veryLow.schedule(c,e));return this},deschedule:function(a){b.chain(this._pools).valuesIn().forEach(function(b){b.contains(a)&&
b.deschedule(a)}).commit();return this}}))});"use strict";g.when("A","jQuery","3p-lodash","westlake-core","bb-models-stream-state").register("bb-data-stream-state",function(a,e,b,g,p){var f=g.Navigation,c=g.Storage.sessionStorage,m=p.StreamState;return{stateManager:{_storagePrefix:"bb-",create:function(d){return new m(d,{timestamp:b.now()})},get:function(d){var h=this._getHistoryState()[d],h=b.isNil(h)?this.create(d):new m(h),f=c.get(this._storagePrefix+d+"-"+h.timestamp);b.isNil(f)?(h=this.create(d),
this.save(h)):h.responses=a.parseJSON(f).responses;return h},save:function(b){var a=b.toSavableState(),e=a.history,a=a.storage,g=this._getHistoryState();g[b.name]=e;f.replaceState(g,null,null);c.set(this._storagePrefix+b.name+"-"+b.timestamp,JSON.stringify(a))},_getHistoryState:function(){return f.getState()||{}}}}});"use strict";g.when("A","jQuery","3p-lodash","westlake-core","bb-configuration-page","bb-configuration-debug","bb-configuration-features","bb-configuration-stream","bb-scheduler","bb-models-stream-request").register("bb-data-stream-adapter",
function(a,e,b,g,p,f,c,m,d,h){e=g.Promise;var t=g.Logger,w=e.Promise,n=e.retry,r=m.data,u=h.StreamRequest;return{Events:{ITEMS_AVAILABLE:"bb:items-available",NO_ITEMS_AVAILABLE:"bb:no-items-available",NO_MORE_ITEMS_AVAILABLE:"bb:no-more-items-available",ITEM_FETCH_ERROR:"bb:item-fetch-error"},THREAD_NAME:"bb:data-thread",AUI_STATE_KEY:"bb-stream-data",API_RESPONSE_OPERATION:"bb-custom-operation",API_RESPONSE_KEY:"bb-stream-data",_requestManagement:{},initialize:function(b){this._requestManagement=
{};this._process=this._process.bind(this);d.schedule(d.Priority.High,this.THREAD_NAME,this._process);var a=this._getRequestManager(b.name);this._loadState(b,a)},_loadState:function(k,a){this._state=k;b.isEmpty(k.requests.cursors)?this._loadInitialPageStateItems(k,a):this._loadInitialCachedItems(k,a)},_getRequestManager:function(k){k=b.isString(k)?k:k.name;var a=this._requestManagement[k];b.isNil(a)&&(a={currentRequest:null,cursor:null,requestedItemIndex:0,fulfilledItemIndex:0,uniqueItems:{},hasMoreItems:!0,
hasMoreRequests:function(){return this.hasMoreItems&&this.requestedItemIndex>this.fulfilledItemIndex}},this._requestManagement[k]=a);return a},_loadInitialPageStateItems:function(k,d){var c=this,f=a.state(this.AUI_STATE_KEY);if(f&&f.data&&!b.isEmpty(f.cursor)){var e=f.data.length;t.count("bb:stream:initial-item-count",e);e=new u(null,0,e);this._saveRequest(k,e);this._loadCursor(k,f,b.noop);this._loadItems(k,f,{request:e});d.requestedItemIndex=d.fulfilledItemIndex+r.maxItemsPerCall}else setTimeout(function(){c._triggerOnNoItemsAvailable()}),
this._stopProcess()},_loadInitialCachedItems:function(a,d){for(var c=this,f=a.requests.cursors,e={data:[]},h=0;h<f.length;h++){var g=(new u(f[h])).hash(),g=a.responses[g];b.isNil(g)||(e.data=b.concat(e.data,g.data))}this._loadItems(a,e,{request:new u(null,0,e.data.length),noSave:!0});a=a.requests.cursor;b.isEmpty(a)?(setTimeout(function(){c._triggerOnNoMoreItemsAvailable()}),this._stopProcess()):d.cursor=a},queueRequest:function(a,d,c){a=this._getRequestManager(a);a.requestedItemIndex=b.max([a.requestedItemIndex,
d+c,a.fulfilledItemIndex+c])},_getRequest:function(a){a=this._getRequestManager(a);var d=a.requestedItemIndex-a.fulfilledItemIndex;0<d&&(d=b.clamp(d,r.minItemsPerCall,r.maxItemsPerCall));d=b.max([0,d]);return new u({cursor:a.cursor},a.fulfilledItemIndex,d)},_process:function(){this._fetchMoreItems(this._state)},_stopProcess:function(){this._getRequestManager(this._state).hasMoreItems=!1;d.deschedule(this.THREAD_NAME)},_fetchMoreItems:function(a){var d=this,c=this._getRequestManager(a);if(c.hasMoreRequests()&&
b.isNull(c.currentRequest)){var f=this._getRequest(a);c.currentRequest=f;this._call(f,a).caught(function(a){b.isArray(a)&&b.some(a,{message:"cursor-empty"})?0===c.fulfilledItemIndex?d._triggerOnNoItemsAvailable():d._triggerOnNoMoreItemsAvailable():d._triggerOnItemFetchError();d._stopProcess()}).then(function(){c.currentRequest=null})}},_call:function(d,e){var h=this,g=r.streamApiUrl;return!d||0>=d.count?w.resolve():n(function(w,x){var n=[],q={cursor:d.cursor,count:d.count},l=p.context();l&&(q=b.assign(q,
{program:l.program,category:l.category,contextAsins:(l.parameters.contextAsins||[]).join(","),ingress:l.parameters.ingress,ingressAsins:(l.parameters.ingressAsins||[]).join(","),searchKeywords:l.parameters.searchKeywords,filters:JSON.stringify(l.parameters.filters)}));if(l=f.context())l.bbDebugParameters&&(q=b.assign(q,{bbDebug:l.bbDebugParameters})),q=b.assign(q,{currencyCode:l.currencyCode||""});(l=c.context())&&(q=b.assign(q,{bbWl:b.map(l,function(a,b){return b+":"+a}).join(",")}));a.ajax(g,{method:"GET",
accepts:"application/json-amazonui-streaming",cache:!1,params:q,indicator:".bb-stream-loader",chunk:function(a){var b=a[1],c=a[2];a[0]===h.API_RESPONSE_OPERATION&&b===h.API_RESPONSE_KEY&&(h._saveRequest(e,d),h._loadCursor(e,c,function(a){n.push(a)}),h._loadItems(e,c,{request:d}))},success:function(a){0<n.length?x(n):(t.increment("bb-fetch-items-success",1),w())},error:function(a){var b=(a&&a.http&&a.http.status?a.http.status:-1)+" "+(a&&a.http&&a.http.statusText?a.http.statusText:"Unknown error");
t.increment("bb-fetch-items-fail",1);t.error("Error returned from api call.",Error(b),m.logging.namespace);x(a)},timeout:r.apiTimeout})},r.retryOptions)},_saveRequest:function(a,d){var c=a.requests.cursors;d=d.copy();b.some(c,d)||a.requests.cursors.push(d)},_loadCursor:function(a,d,c){a.requests.cursor=d.cursor;this._getRequestManager(a).cursor=d.cursor;b.isEmpty(d.cursor)&&b.isFunction(c)&&c({message:"cursor-empty"})},_loadItems:function(a,d,c){var f=this._getRequestManager(a),e=c.request,h=[];b.forEach(d.data,
function(a){var b=a.data.asin;f.uniqueItems[b]||(f.uniqueItems[b]=b,h.push(a))});c.noSave||(d=e.hash(),a.responses[d]={data:h,start:e.start});0<h.length&&(f.fulfilledItemIndex+=h.length,this._triggerOnItemsAvailable({data:h,start:e.start}))},addEventListener:function(d,c){if(1<=b.chain(this.Events).valuesIn().filter(function(a){return a===d}).value().length)a.on(d,c);else throw new TypeError(d+" is not a valid event name.");},_triggerOnItemsAvailable:function(b){a.trigger(this.Events.ITEMS_AVAILABLE,
b)},_triggerOnNoItemsAvailable:function(){a.trigger(this.Events.NO_ITEMS_AVAILABLE)},_triggerOnNoMoreItemsAvailable:function(){a.trigger(this.Events.NO_MORE_ITEMS_AVAILABLE)},_triggerOnItemFetchError:function(){a.trigger(this.Events.ITEM_FETCH_ERROR)}}});"use strict";g.when("A","jQuery","3p-lodash","westlake-core","bb-configuration-stream","bb-models").register("bb-stream-viewport",function(a,e,b,g,p,f){function c(a){this.Events={NEARING_BOTTOM:"bb:stream-nearing-bottom",VISIBLE_ITEMS_CHANGED:"bb:stream-visibility-changed"};
this._$window=e(n);this._$container=a;this._gap=m.gapLength;this._itemBuffer=m.numBufferedRows;this._rows=this._cols=this._totalItemsCount=0;this._itemWidth=this._minItemWidth=m.minItemWidth;this._itemHeight=m.itemHeight;this._bufferRows=b.ceil(m.remainingHeightForMoreItems/this._itemHeight);this._renderedRowRange=new f.Range;this._visibleRowRange=new f.Range;this._oldVisibleItemRange=new f.Range;this._visibleItemRange=new f.Range;this._oldRenderedItemRange=new f.Range;this._renderedItemRange=new f.Range}
var m=p.ui;c.prototype.oldRenderedItemRange=function(){return this._oldRenderedItemRange};c.prototype.renderedItemRange=function(){return this._renderedItemRange};c.prototype.visibleItemRange=function(){return this._visibleItemRange};c.prototype.itemWidth=function(){return this._itemWidth};c.prototype.itemHeight=function(){return this._itemHeight};c.prototype.columnCount=function(){return this._cols};c.prototype.totalItemsCount=function(a){b.isNumber(a)&&(this._totalItemsCount=a);return this._totalItemsCount};
c.prototype.scrollPosition=function(){return this._$window.scrollTop()};c.prototype.recalculate=function(){this._updateRowsAndCols();this._updateItemWidth();this._resizeContainer();this._updateVisibleRange()};c.prototype.update=function(){this._updateVisibleRange()};c.prototype._updateRowsAndCols=function(){var a=this._$container.width(),c=this._gap;this._cols=b.floor((a+c)/(this._minItemWidth+c));this._rows=b.ceil(this._totalItemsCount/this._cols)};c.prototype._updateItemWidth=function(){var a=this._$container.width(),
b=this._gap;this._itemWidth=(a-b*this._cols+b)/this._cols};c.prototype._resizeContainer=function(){this._$container.attr("data-rows",this._rows).attr("data-cols",this._cols);var a=0;0<this._rows&&(a=this._rows*(this._itemHeight+this._gap)-this._gap);this._$container.css({height:a})};c.prototype._updateVisibleRange=function(){var d=!1,c=!1,e=this._cols*this._rows;this._visibleRowRange=this._calculateVisibleItemRowRange();var g=this._convertRowRangeToItemRange(this._visibleRowRange);g.isEqual(this._visibleItemRange)||
(d=!0,this._oldVisibleItemRange=this._visibleItemRange,this._visibleItemRange=g);this._renderedRowRange=new f.Range(b.max([0,this._visibleRowRange.start-m.numBufferedRows]),this._visibleRowRange.end+m.numBufferedRows);this._renderedRowRange.end+this._bufferRows>this._rows&&(c=!0,e=(this._renderedRowRange.end+this._bufferRows)*this._cols);this._renderedRowRange.end=b.min([this._renderedRowRange.end,this._rows]);g=this._convertRowRangeToItemRange(this._renderedRowRange);g.isEqual(this._renderedItemRange)||
(d=!0,this._oldRenderedItemRange=this._renderedItemRange,this._renderedItemRange=g);c&&a.trigger(this.Events.NEARING_BOTTOM,{gridArea:e});d&&a.trigger(this.Events.VISIBLE_ITEMS_CHANGED)};c.prototype._calculateVisibleItemRowRange=function(){var a=this._$container,c=this._$window.scrollTop(),e=c+this._$window.height(),g=a.offset().top,a=g+a.outerHeight(),c=b.max([c,g]),e=b.min([e,a]),a=this._itemHeight+this._gap,c=b.max([0,Math.floor((c-g)/a)]),g=b.max([0,Math.ceil((e-g)/a)]);return new f.Range(c,g)};
c.prototype._convertRowRangeToItemRange=function(a){return new f.Range(this._cols*a.start,this._cols*a.end)};c.prototype.scrollTop=function(a){this._$window.scrollTop(a)};c.prototype.addEventListener=function(c,e){if(1<=b.chain(this.Events).valuesIn().filter(function(a){return a===c}).value().length)a.on(c,e);else throw new TypeError(c+" is not a valid event name.");};return c})});
/* ******** */
(function(d){var e=window.AmazonUIPageJS||window.P,n=e._namespace||e.attributeErrors,b=n?n("BrightBuyWebAppAssets@stream-item","BrightBuyWebAppAssets"):e;b.guardFatal?b.guardFatal(d)(b,window):b.execute(function(){d(b,window)})})(function(d,e,n){d.when("A","jQuery","westlake-utils","westlake-colors","westlake-template","bb-configuration-stream","bb-models-stream-tile").register("bb-models-stream-item",function(b,a,c,f,d,e,g){var k=c._,m=d.Binder,h=e.ui.overlayTransparency;b=g.TileViewModel.extend({init:function(a,
b){this._super();this.content=a.content;this.data=a.data;this.index=b;this._isImageLoaded=!1;this.itemBarBackgroundColor=f.getOverlayCss(this.backColor.clone().blend(f.white,h),.92);a=this.backColor.isCloseTo(f.white,5)?new f.Rgb(245,245,245):this.backColor.toHsv().scale(1,1.03,.97).toRgb().blend(f.white,2*h);this.id="bb-s-item-"+this.index;this.href=c.appendIndexToRefMarkerInUrl(this.data.url,this.index);this.onclick="event.preventDefault ? event.preventDefault() : event.returnValue \x3d false;";
this.css={dimensions:new m(null),overlay:this.backgroundColorCss,triangle:{borderTopColor:a.toCssString()}}},container:function(a){k.isUndefined(a)||(k.isNull(a)?this.$imageContainer=this.$image=this.$container=null:(this.$container=a,this.$image=a.find(".bb-s-item-image \x3e img"),this.$imageContainer=a.find(".bb-s-item-inner-container")));return this.$container},bindingRules:{_container:{attr:{id:"id","data-index":"index"},css:"css.dimensions"},".bb-s-item-url":{attr:{href:"href",onclick:"onclick"}},
".bb-s-item-description-overlay":{css:"css.triangle"},".bb-s-item-bottom-bar":{css:"itemBarBackgroundColor"},".bb-s-item-overlay":{css:"css.overlay"}}});a={};a.StreamItemViewModel=b;return a});"use strict";d.when("A","jQuery","westlake-utils","westlake-colors","westlake-template","bb-configuration-stream").register("bb-models-stream-tile",function(b,a,c,f,d,e){var g=c._,k=d.Binder,m=e.ui.overlayTransparency;b=b.createClass({init:function(){var a=g.random(100,230);this.backColor=new f.Rgb(a,a,a);this.backgroundColorCss=
f.getOverlayCss(this.backColor,m);this.col=this.row=0;this.rect={};this.css={dimensions:new k(null),overlay:this.backgroundColorCss};this.clearContainer()},hasContainer:function(){return!!this.$container},container:function(a){g.isUndefined(a)||(g.isNull(a)?this.$container=null:this.$container=a);return this.$container},setContainer:function(a){this.container(a)},clearContainer:function(){this.container(null)},setDimensions:function(a){var b=this.css;this.rect=a;b.dimensions.val({left:a.x,top:a.y,
width:a.w,height:a.h})},setPosition:function(a){this.row=a.row;this.col=a.col},bindingRules:{}});a={};a.TileViewModel=b;return a});"use strict";d.when("A","jQuery","westlake-utils","westlake-colors","westlake-template","bb-configuration-stream","bb-models-stream-tile").register("bb-models-add-to-home-tile",function(b,a,c,d,e,n,g){b=g.TileViewModel.extend({init:function(b){this._super();this.content=a("#bb-add-to-home-template").html();this.index=b;this.id="bb-add-to-home-tile-"+this.index},bindingRules:{_container:{attr:{id:"id",
"data-index":"index"},css:"css.dimensions"},".bb-s-item-overlay":{css:"css.overlay"}}});c={};c.AddToHomeTileViewModel=b;return c});"use strict";d.when("bb-models-stream-item","bb-models-add-to-home-tile").register("bb-stream-item-models",function(b,a){return{StreamItemViewModel:b.StreamItemViewModel,AddToHomeViewModel:a.AddToHomeTileViewModel}});"use strict";d.when("A","jQuery","westlake-logger","westlake-core","bb-data-api","bb-configuration-variants","cf").register("bb-pages-components-add-to-home",
function(b,a,c,f,r,t){function g(b,p){b.createShortcut({dataUri:p.mshopBookmarkTargetUrl,shortcutName:p.mshopBookmarkTitle,shortcutIconResourceId:p.mshopBookmarkIconResourceId,duplicate:!1,successCallback:function(){c.increment("bb-add-to-homescreen-mshop-success",1);a(".bb-add-to-home-prompt").addClass("aok-hidden");a(".bb-add-to-home-confirmation").removeClass("aok-hidden");l.alreadyAdded=!0;var b=h.localStorage.get("bb-ath")||{};b.tileStatus="clicked";h.localStorage.set("bb-ath",b)},failCallback:function(){c.increment("bb-add-to-homescreen-mshop-failure",
1)}})}function k(){r.recordPageHit({hitType:"clientOnly",pageAction:"ClickAddToHomeTile",success:function(){c.increment("bb-add-to-homescreen-hit-success",1)},error:function(){c.increment("bb-add-to-homescreen-hit-failure",1)}})}var m=f.Navigation,h=f.Storage,q={},l={isHomeScreenShortcutPluginAvailable:!1,alreadyAdded:!1};return{initialize:function(){d.when("HomeScreenShortcutPlugin").execute(function(a){l.isHomeScreenShortcutPluginAvailable=!0;b.declarative("bb:add-to-home-screen","click",function(b){l.alreadyAdded||
(b=b.data,k(),c.increment("bb-add-to-homescreen-mshop-click",1),g(a,b))})});b.declarative("bb:add-to-home-screen","click",function(b){b=b.data;var p="iphone-safari-modal"===b.tileClickAction;if("android-chrome-modal"===b.tileClickAction||p)k(),c.increment("bb-add-to-homescreen-mweb-click",1),l.scrollPosition=a(e).scrollTop(),a("body").addClass("bb-no-scroll").css("top","-"+l.scrollPosition+"px"),a("#bb-add-to-home-modal").removeClass("aok-hidden"),a("#navbar").addClass("bb-two-pixel-blur"),a("#bb-stream-widget").addClass("bb-two-pixel-blur"),
a(".bb-stream-footer").addClass("bb-two-pixel-blur"),document.title=b.mwebBookmarkTitle,m.replaceState(m.getState(),b.mwebBookmarkTitle,b.mwebBookmarkTargetUrl)});b.declarative("bb:add-to-home-modal-exit","click",function(b){c.increment("bb-add-to-homescreen-mweb-dismiss",1);a("#bb-add-to-home-modal").addClass("aok-hidden");a("#navbar").removeClass("bb-two-pixel-blur");a("#bb-stream-widget").removeClass("bb-two-pixel-blur");a(".bb-stream-footer").removeClass("bb-two-pixel-blur");a("body").removeClass("bb-no-scroll").css("top",
"");a(e).scrollTop(l.scrollPosition)})},isEnabled:function(){if(!(h.localStorage.isEnabled&&h.sessionStorage.isEnabled&&0<a("#bb-add-to-home-template").length))return!1;var b=!1,c=h.localStorage.get("bb-ath")||{},d=h.sessionStorage.get("bb-ath")||{},e=a("#bb-add-to-home-template").data("bb-ath-visibility"),f=new Date,g=new Date(c.lastEnabled||f);30<(f.getTime()-g.getTime())/864E5&&(c.visitCount=0,c.tileStatus=null,d.visitIdentifier=null);"clicked"===c.tileStatus?b=!1:"always"===e?b=!0:"first-visits"===
e&&("revisit"!==d.visitIdentifier&&(d.visitIdentifier="revisit",c.visitCount=(c.visitCount||0)+1),(c.visitCount||0)<=("none"!==t.platform?12:3)&&(c.lastEnabled=new Date,b=!0));h.localStorage.set("bb-ath",c);h.sessionStorage.set("bb-ath",d);return b}(),logImpression:function(a){q[a]===n&&(c.increment("bb-add-to-home-impressions",1),q[a]=!0)},injectionIndices:[3,10],state:l}})});
/* ******** */
(function(f){var p=window.AmazonUIPageJS||window.P,k=p._namespace||p.attributeErrors,b=k?k("BrightBuyWebAppAssets@landing-page","BrightBuyWebAppAssets"):p;b.guardFatal?b.guardFatal(f)(b,window):b.execute(function(){f(b,window)})})(function(f,p,k){f.when("A","jQuery","3p-lodash","westlake-core","bb-configuration-page","bb-configuration-stream","bb-stream-item-models","bb-scheduler","bb-data-stream-adapter","bb-stream-viewport","bb-stream-live-tiles").register("bb-stream-renderer",function(b,h,e,g,
d,q,r,c,t,m,u){var v=g.Logger,l=q.ui,n=new (b.createClass({_items:[],_uniqueItems:{},init:function(){this.push=this.push.bind(this);this.run=this.run.bind(this)},push:function(a){var c=d.context();e.isNil(this._uniqueItems[a])&&(this._items.push({asin:a,program:c.program||"",category:c.hash||""}),this._uniqueItems[a]=!0)},run:function(){var a=this._items.slice(0);0<a.length&&(this._items=[],a=e.chain(a).groupBy(function(a){return a.program+"_"+a.category.substr(0,6)}).value(),e.forIn(a,function(a,
c){a=e.chain(a).map(function(a){return a.asin}).value();v.asinImpressions("brightbuy",c,a)}))}}));c.schedule(c.Priority.Medium,"asinImpressionThread:run",n.run);return b.createClass({Events:{ON_POST_INITIAL_RENDER:"bb:post-initial-render"},_container:null,_$container:null,_$footer:null,_viewport:null,_streamDataProvider:t,_items:[],_state:null,_addToHomeComponent:null,items:function(){return this._items},viewport:function(){return this._viewport},initialize:function(a,c,d){this._container=a;this._$container=
h(a);this._$footer=h(l.footerDiv);this._viewport=new m(this._$container);this._addToHomeComponent=d;this._onNearingBottom=this._onNearingBottom.bind(this);this._onItemsAvailable=this._onItemsAvailable.bind(this);this._onNoItemsAvailable=this._onNoItemsAvailable.bind(this);this._onNoMoreItemsAvailable=this._onNoMoreItemsAvailable.bind(this);this._onVisibleItemsChanged=this._onVisibleItemsChanged.bind(this);this.resize=b.throttle(this._resize.bind(this),100);this.scroll=b.throttle(this._scroll.bind(this),
100);this._triggerOnPostInitialRenderEvent=e.once(this._triggerOnPostInitialRenderEvent);this._viewport.addEventListener(this._viewport.Events.NEARING_BOTTOM,this._onNearingBottom);this._viewport.addEventListener(this._viewport.Events.VISIBLE_ITEMS_CHANGED,this._onVisibleItemsChanged);this._streamDataProvider.addEventListener(this._streamDataProvider.Events.ITEMS_AVAILABLE,this._onItemsAvailable);this._streamDataProvider.addEventListener(this._streamDataProvider.Events.NO_ITEMS_AVAILABLE,this._onNoItemsAvailable);
this._streamDataProvider.addEventListener(this._streamDataProvider.Events.NO_MORE_ITEMS_AVAILABLE,this._onNoMoreItemsAvailable);this._streamDataProvider.addEventListener(this._streamDataProvider.Events.ITEM_FETCH_ERROR,this._onNoMoreItemsAvailable);this._state=c;this._streamDataProvider.initialize(this._state);this.hideFooter();this.scrollToLastPosition(this._state);this._liveTiles=new u;this._liveTiles.initialize(this)},_onNearingBottom:function(a){a=a.gridArea;a>=this._items.length&&this._streamDataProvider.queueRequest(this._state,
this._items.length,a-this._items.length)},_onItemsAvailable:function(a){for(var c=0,d=this._items.length;c<a.data.length;)this._addToHomeComponent.isEnabled&&e.includes(this._addToHomeComponent.injectionIndices,d)?this._items.push(new r.AddToHomeViewModel(d)):(this._items.push(new r.StreamItemViewModel(a.data[c],d)),c++),d++;this._viewport.totalItemsCount(this._items.length);this._viewport.recalculate()},_onNoItemsAvailable:function(a){this.showFooter({messageContainer:".bb-stream-footer-no-items"})},
_onNoMoreItemsAvailable:function(a){this.showFooter({messageContainer:".bb-stream-footer-no-more-items"})},_onVisibleItemsChanged:function(){var a=this._viewport.oldRenderedItemRange(),c=this._viewport.renderedItemRange(),d=e.min([a.start||0,c.start]),a=e.max([a.end||0,c.end]);this._render(e.slice(this._items,d,a));this._triggerOnPostInitialRenderEvent()},_render:function(a){var c=this,d=l.gapLength,b=this._viewport.columnCount(),q=this._viewport.itemWidth(),t=this._viewport.itemHeight(),f=this._viewport.renderedItemRange(),
m=this._viewport.visibleItemRange(),u=f.start,p=f.end,k=document.createDocumentFragment(),y=[];e.forEach(a,function(a,f){var l=h(a.content),A={row:e.floor(a.index/b),col:a.index%b};a.setPosition(A);a.index<u||a.index>=p?a.hasContainer()&&(y.push(a.$container.get(0)),a.clearContainer()):(a.setDimensions({x:a.col*(q+d),y:a.row*(t+d),w:q,h:t}),a.hasContainer()||(l=(new g.Template(l,a.bindingRules)).bind(a),a.setContainer(l),a instanceof r.AddToHomeViewModel&&c._addToHomeComponent.state.alreadyAdded&&
(a.$container.find(".bb-add-to-home-prompt").addClass("aok-hidden"),a.$container.find(".bb-add-to-home-confirmation").removeClass("aok-hidden")),k.appendChild(l.get(0)),k=c._flushFragment(k,f)));a.index>=m.start&&a.index<m.end&&(a instanceof r.StreamItemViewModel?n.push(a.data.asin):a instanceof r.AddToHomeViewModel?c._addToHomeComponent.logImpression(a.id):v.warn("Encountered unrecognized itemViewModel (brightbuy tile): "+a+".",null,"brightbuy"))});h(y).remove();this._$container.append(k)},_flushFragment:function(a,
c){var d=this._viewport.columnCount();return c%d===d-1?(this._$container.append(a),document.createDocumentFragment()):a},_resize:function(){this._viewport.recalculate()},_scroll:function(){this._viewport.update()},showFooter:function(a){a=a&&a.messageContainer?", "+a.messageContainer:"";h(".bb-stream-bottom").addClass("aok-hidden");h(".bb-stream-footer"+a).removeClass("aok-hidden");f.when("mash").execute(function(){h(".bb-stream-footer-mobileapp-placeholder").removeClass("aok-hidden")});this._$footer.removeClass("aok-hidden")},
hideFooter:function(){this._$footer.addClass("aok-hidden")},scrollToLastPosition:function(a){a&&a.yPosition&&0<a.yPosition&&this._viewport.scrollTop(a.yPosition)},addEventListener:function(a,c){if(1<=e.chain(this.Events).valuesIn().filter(function(c){return c===a}).value().length)b.on(a,c);else throw new TypeError(a+" is not a valid event name.");},_triggerOnPostInitialRenderEvent:function(){b.trigger(this.Events.ON_POST_INITIAL_RENDER)}})});"use strict";f.when("A","jQuery","3p-lodash","bb-stream-live-tiles-config").register("bb-stream-live-tiles",
function(b,h,e,g){return b.createClass({initialize:function(d){setInterval(function(){var b=d._viewport.renderedItemRange();e.forEach(e.slice(d._items,b.start,b.end),function(d,c){if(null!==d.$image&&d.$image!==k&&2<d.$image.length){c=d.$imageContainer.find(".bb-u-img-live-tile-current");c=0<c.length?c[0]:d.$image[0];var b=c.nextElementSibling;null===b&&(b=d.$image[0]);c.style.transition=g.transitionTime;b.style.transition=g.transitionTime;c.classList.remove("bb-u-img-live-tile-current");b.classList.add("bb-u-img-live-tile-current")}})},
g.delayTime)}})});"use strict";f.register("bb-stream-live-tiles-config",function(){return{transitionTime:"none",delayTime:1E4}});"use strict";f.when("A","jQuery","a-carousel-framework","cf").register("bb-pages-components-category-refinement",function(b,h,e){return{_$carouselContainer:null,initialize:function(b){this._$carouselContainer=h(b);this.goToSelectedItemOnInit=this.goToSelectedItemOnInit.bind(this);e.onInit("bb-category-refinement",this.goToSelectedItemOnInit)},goToSelectedItemOnInit:function(b){var d=
this._$carouselContainer.find(".bb-s-cat-item-container .selected").data("item-index"),e=b.getAttr("pageSize"),d=Math.max(0,Math.floor(d/e))+1,e=b.getAttr("animation_speed");b.setAttr("animation_speed",1E5);b.gotoPage(d);b.setAttr("animation_speed",e)}}});"use strict";f.when("A","3p-lodash","westlake-core","bb-configuration-variants","ready").register("bb-pages-components-back-to-top",function(b,h,e,f){var d=b.$,q=e.Logger;return{_$topIndicator:null,_$buttonContainer:null,initialize:function(e,c){this._$topIndicator=
d(e);this._$buttonContainer=d(c);this.scroll="none"===f.platform?b.throttle(this.scroll.bind(this),200):h.noop;b.declarative("bb:back-to-top","click",function(c){q.increment("bb-btt-click",1);d("html, body").animate({scrollTop:0},500);var b=d(document),e=function(){d("html, body").stop();b.unbind("wheel touchstart",e)};b.bind("wheel touchstart",e)})},scroll:function(){b.onScreen(this._$topIndicator,0)?this._$buttonContainer.removeClass("bb-stream-btt-onscreen"):this._$buttonContainer.addClass("bb-stream-btt-onscreen")}}});
"use strict";f.when("A","3p-lodash","westlake-logger","bb-configuration-stream").register("bb-pages-components-share",function(b,h,e,g){var d=g.logging.namespace;return{initialize:function(){f.when("mash").register("bb-pages-subcomponents-share",function(q){b.declarative("bb:share","click",function(b){e.increment("bb-share-click",1);q.share(h.merge({},b.data,{successCallback:function(){},failCallback:function(c){c=c&&c.code?c.code:h.toString(c);e.increment("bb-share-fail",1);e.error("Share function failed in app.",
Error(c),d)},shareServiceSelectedCallback:function(c){c?e.increment("bb-share-success-"+c,1):e.increment("bb-share-cancel",1)}}))})})}}});"use strict";f.when("A","3p-lodash","a-modal","a-dropdown","ready").register("bb-pages-components-detail",function(b,h,e,f){var d=b.$;b.on("a:popover:ajaxContentLoaded:detailPageModal",function(b){b="#a-popover-"+b.popover.id+" ";var e=d(b+".bb-dp-alt-images li"),c=d(b+".bb-dp-image-main img.presented"),f=d(b+".bb-dp-image-main img.hidden"),h=d(b+".bb-dp-swatch-images li"),
g=d(b+".bb-dp-color-text span"),k=g.text(),l=k,n=f[0].src;d(b+" #asinVariations");e.click(function(){c.attr("src",f.get(d(this).index()).src);n=f.get(d(this).index()).src;g.text(k);l=k});h.hover(function(){g.text(d(this).find("img")[0].alt);c.attr("src",d(this).find("img")[0].src)},function(){g.text(l);c.attr("src",n)});h.click(function(){l=d(this).find("img")[0].alt;g.text(l);n=d(this).find("img")[0].src;c.attr("src",n)})});return{initDetailPage:function(f,g){var c="bb",k="/",m=b.state("bb-stream-data");
h.isEmpty(m)||(c=m.program,k=m.category);g={name:"detailPageModal",width:"70%",height:"60%",url:"/bbp/"+c+"/dp/"+g+"?category\x3d"+k};f=d("#bb-s-item-"+f);e.create(f,g).show()}}});"use strict";f.when("A","jQuery","3p-lodash","westlake-core","bb-configuration-stream","bb-configuration-debug","bb-models","bb-data-stream-state","bb-stream-renderer","bb-pages-components-category-refinement","bb-pages-components-back-to-top","bb-pages-components-feedback-bottomsheet","bb-pages-components-share","bb-pages-components-detail",
"bb-pages-components-add-to-home","ready").register("bb-pages-landing",function(b,f,e,g,d,k,r,c,t,m,u,v,l,n,a){var w=g.Logger,z=g.Navigation,x=c.stateManager;b={name:"stream",container:".bb-stream-container",_$container:null,_renderer:null,initialize:function(){this._$container=f(this.container);this.isFeatureContainerExists()&&(this.onLazyInit=this.onLazyInit.bind(this),this.onFirstVisible=this.onFirstVisible.bind(this),this.onResize=this.onResize.bind(this),this.onScroll=this.onScroll.bind(this),
this._onItemClick=this._onItemClick.bind(this),this.onBeforeUnload=this.onBeforeUnload.bind(this),p.addEventListener("beforeunload",this.onBeforeUnload),this._$container.delegate("div[data-index] a","click mouseup",this._onItemClick),this._state=x.get("all"),this._addToHomeComponent=a,this._addToHomeComponent.initialize(),this._renderer=new t,this._renderer.addEventListener(this._renderer.Events.ON_POST_INITIAL_RENDER,this._onPostInitialRender),this._renderer.initialize(this.container,this._state,
this._addToHomeComponent),this._categoryRefinement=m,this._categoryRefinement.initialize(".bb-stream-categories"),this._backToTop=u,this._backToTop.initialize(".bb-stream-data",".bb-stream-back-to-top"),this._feedbackBottomSheet=v,this._feedbackBottomSheet.initialize(".bb-stream-data","#bb-feedback-bottomsheet-widget"),this._shareComponent=l,this._shareComponent.initialize())},onLazyInit:function(){},onFirstVisible:function(){},onResize:function(){this._renderer&&this._renderer.resize()},onScroll:function(){this._renderer&&
(this._renderer.scroll(),this._feedbackBottomSheet._$showFeedback&&this._feedbackBottomSheet.scroll(),this._backToTop.scroll())},onBeforeUnload:function(){if(!k.context().streamNoCache){var a=this._renderer.viewport();this._state.yPosition=a.scrollPosition();x.save(this._state)}},_onPostInitialRender:function(){w.mark("cf","bb:initload");w.mark("af","bb:initload");w.mark("ld","bb:initload")},_onItemClick:function(a){var b=a.currentTarget,c=f(b).attr("href");3!==a.which&&(a.ctrlKey||2===a.which?p.open(c,
"_blank"):d.features.isDetailPageFeatureEnabled()?(a=this._getItemIndex(f(b.parentElement)),b=this._renderer.items(),n.initDetailPage(a,b[a].data.asin)):z.go(c))},_getItemIndex:function(a){return e.parseInt(a.attr("data-index"))},isFeatureContainerExists:function(){return!!this._$container.length}};g.Page.register(b);return b})});
/* ******** */
