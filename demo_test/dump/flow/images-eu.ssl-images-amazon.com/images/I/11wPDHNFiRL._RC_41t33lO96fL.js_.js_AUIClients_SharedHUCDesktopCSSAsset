(function(f){var e=window.AmazonUIPageJS||window.P,l=e._namespace||e.attributeErrors,h=l?l("SharedHUCAsset",""):e;h.guardFatal?h.guardFatal(f)(h,window):h.execute(function(){f(h,window)})})(function(f,e,l){f.when("A").register("HUC",function(h){return{makeAjaxCall:function(g,f,k,e,c,d){return h.$.ajax({type:"POST",url:g,data:f,cache:!1,dataType:"json",beforeSend:function(a,b){c&&c(a,b)},success:function(a,b){k&&k(a)},error:function(a,b){e&&e(a,b)},complete:function(a,b){d&&d()}})}}});"use strict";
f.when("A").register("huc-page-state",function(h){var g=h.$;return{updatePageState:function(){if(h.capabilities.history){var f=e.location.href,k;(k=g("#huc-page-state").data("url"))&&f!==k&&e.history.replaceState({url:k,type:"huc"},e.document.title,k)}}}});f.when("huc-page-state","ready").execute(function(h){h.updatePageState()});"use strict";f.when("A","jQuery","ready").register("huc-common-util",function(h,g){function f(){var c=[];g(".warranty-hidden-info").each(function(a,b){c[a]="warranty-"+g(b).data("baseAsin")});
Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1});g(".huc-v2-box-warranty").each(function(a,b){-1===c.indexOf(g(b).find(".hlb-warranty").attr("id"))&&g(b).remove()});var d=g("#huc-v2-message-group");0===d.children().length&&d.remove()}var k,e={};return{appendRefPrefix:function(c){"undefined"===typeof k&&(k=g("#refTagPrefix").val()||"");return k+c},preventEventTrigger:function(c,d){return c?e[c]?e[c]:(e[c]=!0,setTimeout(function(){e[c]=
!1},d||200),!1):!1},purifyPage:function(){f()},refreshElements:function(c,d,a){if(c&&d){(a="string"===typeof a?g(a):a)&&a.length||(a=g("body"));for(var b in d)d.hasOwnProperty(b)&&(c[b]=a.find(d[b]));c.rootNode=a;return c}},truncateWithEllipsis:function(c,d){var a=g.trim(d.text());if(0!==a.length&&"..."!==a.substr(-1)){c=c*parseInt(d.css("font-size").replace(/[a-z]/gi,""),10)*1.255;var b=a;if(!/[\u3400-\u9FBF]/.test(a))for(var e=a.split(" "),f=e.length;!(d.height()<=c)&&1<f--;)""!==e[f]&&(b=e.slice(0,
f).join(" ")+"...",d.text(b));for(;!(d.height()<=c)&&0<b.length;)b=b.substr(0,b.length-1),d.text(b+"...");d.is("a")&&a!==b&&d.attr("title",a)}},isIE:function(){var c=document.documentElement.style,d="MozAppearance"in c;return!d&&!(!d&&"webkitAppearance"in c)&&(0===navigator.appName.indexOf("Microsoft")||-1<navigator.userAgent.indexOf("Trident/"))}}})});
/* ******** */
(function(h){var n=window.AmazonUIPageJS||window.P,w=n._namespace||n.attributeErrors,d=w?w("SharedHUCDesktopAsset",""):n;d.guardFatal?d.guardFatal(h)(d,window):d.execute(function(){h(d,window)})})(function(h,n,w){h.when("A","jQuery","ready").register("MiniDetail",function(d,a){function g(b,d){var k=d.index;b.$declarativeParent.parents(".mini-detail-wrap").find(".sc-toggle-thumb").each(function(){a(this).data("imgIndex")===k?a(this).hasClass("a-hidden")&&a(this).removeClass("a-hidden"):a(this).hasClass("a-hidden")||
a(this).addClass("a-hidden")})}d.declarative("sc-thumb-action","mouseenter",function(b){b.$declarativeParent.parents(".mini-detail-wrap").find("[data-action\x3dsc-thumb-action]").each(function(){a(this).find(".a-button.a-button-thumbnail").removeClass("a-button-selected")});b.$declarativeParent.find(".a-button.a-button-thumbnail").addClass("a-button-selected");g(b,b.data)})});"use strict";h.when("A","a-popover-manager","ready").execute(function(){h.when("A","a-popover-base").register("sc-click-popover",
function(d,a){function g(q,c){var f=a.get(q.$declarativeParent),e=1;"showCloseButton"in c&&(e=c.showCloseButton);b(f);a.show({$trigger:q.$declarativeParent,header:c.header,showCloseButton:e,content:c.content,width:c.width,height:c.height,position:c.position||"triggerVertical",url:c.url,ajaxFailMsg:c.ajaxFailMsg,cache:"false"===c.cache||!1===c.cache?!1:!0,data:c.data,name:c.name,skin:k,update:p,hide:function(){var e=this;e.animating=!0;d.fadeOut(this.$popover,250);d.delay(function(){e.animating=!1},
250)}})}function b(a){a&&a.destroyTimer&&(clearTimeout(a.destroyTimer),a.destroyTimer=null)}var f=d.$,k=function(a,b){var d="";b.showCloseButton&&(d='\x3cbutton data-action\x3d"a-popover-close" class\x3d"a-button-close a-declarative sc-close-button"\x3e\x3ci class\x3d"a-icon a-icon-close"\x3e\x3c/i\x3e\x3c/button\x3e');var e=b.header,d=e?['\x3cdiv class\x3d"a-popover-header"\x3e',"\x3ch4\x3e"+e+"\x3c/h4\x3e",d,"\x3c/div\x3e"].join("\n"):["\x3cdiv\x3e",d,"\x3c/div\x3e"].join("\n"),e=b.width;b=b.height;
return['\x3cdiv class\x3d"a-popover sc-click-popover"\x3e\n\x3cdiv class\x3d"a-popover-wrapper"',e||b?['style\x3d"',b?"height:"+b+"px;":"",e?"width:"+e+"px;":"",'"'].join(" "):"","\x3e",d,'\x3cdiv class\x3d"a-popover-inner"\x3e',a,'\x3c/div\x3e\n\x3cdiv class\x3d"a-arrow-border"\x3e\n\x3cdiv class\x3d"a-arrow"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3c/div\x3e'].join("\n")},p=function(a){"string"===typeof a?f(".a-popover-inner",this.$popover).html(a):a&&f(".a-popover-inner",this.$popover).html("").append(a)};
d.declarative("sc-click-popover","click",function(a){g(a,a.data)})})});h.when("a-popover-data","ready").execute(function(){h.when("A","a-popover","huc-common-util","a-tooltip").register("sc-click-popover",function(d,a,g){function b(a){var b=a.popover;a=b.$popover;b.attrs("fromOrderRow")&&(b=q("#huc-v2-order-row-with-divider").data("isPinned")?"fixed":"absolute",a.css("position",b),"fixed"===a.css("position")&&(b=parseInt(a.css("top"),10)-m.scrollTop(),a.css("top",b)))}function f(a){if(!a)return null;
c.hasOwnProperty(a)||(c[a]={hasFailedContent:!1});return c[a]}function k(b){var d=f(b.popover.attrs("name"));d&&d.hasFailedContent&&(a.remove(b.popover),d.hasFailedContent=!1)}function p(a){if(a=f(a.popover.attrs("name")))a.hasFailedContent=!0}var q=d.$,c={},m=q(n);d.declarative("sc-click-popover","click touchend",function(e){var l=e.data||{};if(g.preventEventTrigger("show-huc-popover-"+l.name,500))e.$event.stopPropagation();else{var t;t=e.$declarativeParent;var c=a.get(t);c||(c=l||{},l=c.name,c=
a.create(t,c),d.on("a:popover:ajaxFail:"+l,p),d.on("a:popover:afterHide:"+l,k),d.on("a:popover:afterUpdatePosition:"+l,b),c.attrs({activate:"onclick"}));t=c;t&&(t.isActive()?(t.hide(),e.$event.preventDefault()):t.show())}})})});h.when("A","huc-common-util","ready").execute(function(d,a){var g=d.$;(function(){g("#hl-cart").delegate("#hlb-imb li a","click",function(a){g.event.fix(a).preventDefault();g(this).removeAttr("href")})})();a.purifyPage()});h.when("A","jQuery","nav.setCartCount","a-modal","a-dropdown",
"ready").execute(function(d,a,g,b,f){function k(a){var b=d.trim(a.val());/^0+/.test(b)?(q(a),a.val("")):/^\d+$/.test(b)?(a.val(p(b)),b=a.closest(".sc-action-quantity").data("old-value"),a.val()!==b?a.closest(".sc-action-quantity").find(".sc-update-link").removeClass("a-hidden"):q(a)):q(a)}function p(a){if(/^0{2,}/.test(a))return"0";var b=/^0+(\d+)/;return b.test(a)?a.replace(b,"$1"):a}function q(a){a.closest(".sc-action-quantity").find(".sc-update-link").addClass("a-hidden")}function c(a){var b=a.closest(".sc-action-quantity").data("old-value");
a.val(b)}function m(d,c){v||(v=!0,u.resetUEForAJAXRequest(),a.ajax({type:"GET",url:"/gp/huc/ajax-handler/modify-addon-qty.html",cache:!1,dataType:"json",data:{scopeIn:e("hucArgsScope"),viewIDIn:e("hucArgsViewID"),newItemsStrIn:e("hucArgsNewItems"),increasedItemsStrIn:e("hucArgsIncreasedItems"),itemidIn:d.data("itemid"),quantityIn:c},beforeSend:function(a,b){l()},success:function(c){u.setStartTimeForAJAXRequest();u.setIDForAJAXRequest(c.requestId);if(c.closeAddonPopover){var e=b.get("addon-modal");
e&&e.isActive()&&e.hide()}c.addonPopoverHTML&&(e=c.addonPopoverHTML,a("#addon-popover-wrapper").replaceWith(e.featureHTML));if(c.addonReminderPopoverHTML){var e=c.addonReminderPopoverHTML,l=a("#popover-place-holder");l.length?l.replaceWith(e.featureHTML):a(document.body).append(e.featureHTML)}c.pantryPopoverHTML&&(e=c.pantryPopoverHTML,a("#pantry-popover-wrapper").replaceWith(e.featureHTML));c["total-cart-items"]&&g(c["total-cart-items"]);c.subcartHTML&&(e=c.subcartHTML,l=a("#huc-msg-boxs"),l.length||
(l=a("#hlb-subcart")),l.replaceWith(e.featureHTML));c.subcartButtonHTML&&(e=c.subcartButtonHTML,l=a("#huc-v2-subcart-buttons-wrapper"),l.length&&l.replaceWith(e.featureHTML));c.warningBoxHTML&&(e=c.warningBoxHTML,l=a("#huc-v2-box-warning"),l.length&&l.replaceWith(e.featureHTML));c.infoBoxHTML&&(e=c.infoBoxHTML,l=a("#huc-v2-box-info"),l.length&&l.replaceWith(e.featureHTML));c.pantryBoxHTML&&(e=c.pantryBoxHTML,l=a("#huc-v2-box-pantry"),l.length&&l.replaceWith(e.featureHTML));c.limitedQuantityBreached&&
a("."+d.data("itemid")+" .quantity").addClass("limitedQuantityBreached");c.quantityUpdateErrorMessageHTML&&a("."+d.data("itemid")+" .hlb-scarcity").after(c.quantityUpdateErrorMessageHTML);c.bottomOrderRowHTML&&(e=c.bottomOrderRowHTML,l=a("#huc-v2-bottom-order-row-with-divider"),l.length&&l.replaceWith(e.featureHTML));c.cartServiceError&&(c=d.data("old-value"),9<c?d.find("input.sc-quantity-textfield").val(c):(e=d.find("input.sc-quantity-textfield"),e.hide(),q(e),a("."+d.data("itemid")+" select").parent().show(),
f.getSelect(a("."+d.data("itemid")+" select")).setValue(c)));u.cfLoadedForAJAXRequest()},error:function(a,c,b){},complete:function(a,c){t();v=!1;u.pageLoadedForAJAXRequest()}}))}function e(c){return c&&a("#"+c).val()||""}function l(){a(".sc-action-quantity select").each(function(a){f.getSelect(this).update({status:"disabled"})});a(".a-button:not(.a-button-disabled)").addClass("a-button-disabled")}function t(){a(".sc-action-quantity select").each(function(a){f.getSelect(this).update({status:"normal"})});
a(".a-button").removeClass("a-button-disabled")}var u=n.CartPerf||{};a(document).delegate(".sc-update-link","click",function(c){c=a(this);var b=c.closest(".sc-action-quantity").find(".sc-quantity-textfield").val();m(c.closest(".sc-action-quantity"),b)});a(document).delegate(".sc-quantity-textfield","focus",function(b){b=a(this);1>d.trim(b.val()).length&&c(b);k(b)});a(document).delegate(".sc-quantity-textfield","keydown",function(c){c=a.event.fix(c);return 48<=c.which&&57>=c.which||96<=c.which&&105>=
c.which||8===c.which||46===c.which||9===c.which});a(document).delegate(".sc-quantity-textfield","keyup",function(c){13===a.event.fix(c).which?(c=a(this),""!==c.val()&&m(c.closest(".sc-action-quantity"),c.val())):k(a(this))});a(document).delegate(".sc-quantity-textfield","input",function(c){k(a(this))});a(document).delegate(".sc-quantity-textfield","blur",function(b){b=a(this);1>d.trim(b.val()).length&&c(b)});d.on("a:dropdown:selected:sc-quantity",function(c){var b=a(c.selectNode),e=b.closest(".sc-action-quantity");
"10"===c.value?(b.parent().hide(),c=e.find("input.sc-quantity-textfield"),c.show().focus(),c.select()):m(e,c.value)});var v=!1});h.when("A","cf").register("imb-expander-metrics",function(d){function a(){d.post("/gp/huc/ajax-handler/log-marker.html?tag\x3dimb_expand");d.off("a:expander:huc-imb-expander:toggle:expand",a)}d.on("a:expander:huc-imb-expander:toggle:expand",a)});h.when("A","jQuery","a-modal","ready").execute(function(d,a,g){d.declarative("huc-modal-precheck","click",function(b){var d=a("#popup-on-ptc"),
k=a("body");"addon-sfl-modal"===b.data.name&&(b=k.data("addonSFLModalHitCount")||0,b++,1<b?g.remove(d):k.data("addonSFLModalHitCount",b))})});"use strict";h.when("A","ready").register("huc-gift-checkbox",function(d){function a(a){a.preventDefault();a.stopPropagation()}function g(b,l,d){h.when("HUC").execute(function(f){n.CartPerf.resetUEForAJAXRequest();f.makeAjaxCall(d,l,function(a){n.CartPerf.setStartTimeForAJAXRequest();n.CartPerf.setIDForAJAXRequest(a.requestId);"OK"===a.status&&(a=b.is(":checked")?
1:0,c&&0<c.length&&(a?c.hide():c.show()));n.CartPerf.cfLoadedForAJAXRequest();h.when("CheckoutPrefetch").execute(function(a){a.initiateAndStorePurchase()})},function(a,c){},function(){h.when("CheckoutPrefetch").execute(function(a){a.clearHUCPTCInitiateId()});b.prop("disabled",!0);m.find("input").prop("disabled",!0);m.find("a").addClass("locked").bind("click",a)},function(){b.prop("disabled",!1);m.find("input").prop("disabled",!1);m.find("a").removeClass("locked").unbind("click",a);n.CartPerf.pageLoadedForAJAXRequest()})})}
var b=d.$,f=b("#gcData"),k="1"===f.attr("enableRememberMe")?!0:!1,p="1"===f.attr("enabledEWCClickModel")?!0:!1,q="1"===f.attr("isFromLightBox")?!0:!1,c=b("#hlb-cart-rogue"),m=b("#hl-cart").find("span.a-button");1>m.length&&(m=b("#huc-v2-subcart-buttons-wrapper").find("span.a-button"));k&&(k=b("span.hlb-checkout-button a").attr("href"))&&0<k.length&&0<=k.indexOf("https")&&(k=0<k.indexOf("?")?k+"\x26hasWorkingJavascript\x3d1":k+"?hasWorkingJavascript\x3d1",b("span.hlb-checkout-button a").attr("href",
k));f.attr("giftText")&&0<f.attr("giftText").length&&b(".giftableItem").each(function(){var a=b(this),c;if("1"===a.attr("suppresscheckbox"))c=b(".hlb-gift-no-checkbox-cb-template").clone(),c.attr("class","hlb-gift-no-checkbox-cb");else{c=b(".hlb-gift-cb-template").clone();c.attr("class","hlb-gift-cb");var d=c.find("input[type\x3dcheckbox]");d.attr({id:"wrap-"+a.attr("asin"),name:"wrap-"+a.attr("asin"),itemid:a.attr("itemId"),reftagsuffix:a.attr("refTagSuffix")});"1"===a.attr("wrapped")&&d.attr("checked",
"checked")}c.appendTo("div#gift-option-"+a.attr("itemId")).fadeIn("slow");"1"===b.trim(a.attr("isShowKindleGiftLearnMore"))?b(".hlb-kindle-gift-learn-more-template").clone().attr("class","hlb-kindle-gift-learn-more").appendTo(c.find("label .a-checkbox-label")).fadeIn("slow"):"1"===b.trim(a.attr("isShowGLMPopover"))&&b(".hlb-gift-learn-more-template").clone().attr("class","hlb-gift-learn-more").appendTo(c.find("label .a-checkbox-label")).fadeIn("slow")});b(".nonGiftableItem").each(function(){b(".hlb-no-gift-cb-template").clone().attr("class",
"hlb-no-gift-cb").appendTo("div#gift-option-"+b(this).attr("itemId")).fadeIn("slow")});b("#hl-items .hlb-gift-cb").show().find("input").bind("click",function(){var a=b(this),c={ref:a.attr("reftagsuffix"),asin:a.attr("id")?a.attr("id").substr(5):"",itemId:a.attr("itemid"),wrap:a.is(":checked")?1:0};g(a,c,"/gp/huc/wrap.html")});b("body").delegate(".sc-item-mini-detail .huc-mini-detail-gift-option input","click",function(){var a=b(this),c=a.parents(".huc-mini-detail-gift-option"),c={asin:c.attr("data-asin")||
c.attr("asin"),itemId:c.attr("data-itemid")||c.attr("itemid"),wrap:a.is(":checked")?1:0};g(a,c,"/gp/huc/wrap.html")});b("body").delegate("#huc-v2-gifting-container #huc-v2-order-row-mark-gift input","click",function(){var a=b(this),c=b(".huc-v2-order-row-item").data(),c={asin:c.asin,itemId:c.itemid,wrap:a.is(":checked")?1:0};g(a,c,"/gp/huc/wrap.html")});!p&&!q&&0<b("#hlb-page-container").length&&0<b("#hlb-message-form").length&&h.when("nav.overrideCartButtonClick").execute(function(a){a(function(){var a=
b("#hlb-message-form"),c=a.attr("action");c&&!/ref=gno_cart/.test(c)&&a.attr("action",c.replace(/ref=.*?$/,"ref\x3dgno_cart"));a.submit();return!1})});d.declarative("huc-set-order-gift",["change"],function(a){a=b("#huc-order-gift-checkbox");if(!(1>a.length)){var c={wrap:a.is(":checked")?1:0};g(a,c,"/gp/huc/ajax-handler/set-order-gift.html")}})});"use strict";h.when("A","jQuery","ready").register("pantry-pop-metrics",function(d,a){d.on("a:popover:show:pantry-modal",function(){if(a("#pantry-popover-wrapper").length){var d=
n.ue;if("undefined"!==typeof d&&"undefined"!==typeof d.count){var b=d.count("pantryDesktopHUCPopoverCount");isNaN(b)&&(b=0);d.count("pantryDesktopHUCPopoverCount",b+1)}}})});"use strict";h.when("A","ready").execute("CartAddonReminderModalController",function(d){function a(a,c){p(a).each(function(){var a=p(this).find("input[type\x3dcheckbox]").prop("checked");c!==a&&p(this).find("input[type\x3dcheckbox]").prop("checked",!a)})}function g(a,c){return a.replace(/%(\d+)/g,function(a,b){return c[--b]})}
function b(){var a=0;p("#addon-sfl-popover-wrapper .sc-addon-reminder-include-item input[type\x3dcheckbox]").each(function(){if(p(this).is(":checked")){var c=p(this).val(),c=p(".sc-addon-reminder-item-section[data-itemid\x3d"+c+"]");c.length&&(c=parseInt(c.attr("data-quantity"),10),isNaN(c)||(a+=c))}});return a}function f(a){var c=p("#sc-addon-sfl-selected-qty-many-source").text();p("#sc-addon-sfl-selected-qty-many").text(g(c,[a]));var c=1===a,b=1<a;k("#sc-addon-sfl-selected-qty-none",1>a);k("#sc-addon-sfl-selected-qty-one",
c);k("#sc-addon-sfl-selected-qty-many",b)}function k(a,c){c?p(a).removeClass("a-hidden"):p(a).addClass("a-hidden")}var p=d.$;d=p(document);d.delegate("#addon-sfl-popover-wrapper .sc-addon-reminder-summary","change",function(d){d=p("#addon-sfl-popover-wrapper .sc-addon-reminder-summary").find("input[type\x3dcheckbox]").prop("checked");a("#addon-sfl-popover-wrapper .sc-addon-reminder-include-item",d);d=b();f(d)});d.delegate("#addon-sfl-popover-wrapper .sc-addon-reminder-include-item","change",function(d){d=
b();a("#addon-sfl-popover-wrapper .sc-addon-reminder-summary",1<=d);f(d)})});"use strict";h.when("A","a-modal","a-checkbox","ready").register("si-huc",function(d,a,g){var b=d.$,f=d.state("si-huc-info");if(f){var k=f.baseAsin,p,q=f.configExpWeblab||"",c=f.casData,m=function(){b("#hlb-ptc-btn-native").unbind("click.siptc");document.getElementById("hlb-ptc-btn-native").click()},e=function(){var a={impression:"i",yes:"y",no:"n",optout_hidden:"oh",optout_yes:"oy",optout_no:"on"},c=function(c,b){c=["psd_hi",
a[c],k,p].join("_");b&&(c+="?isAdding\x3d"+(b.isAdding?1:0),b.serviceAsin&&b.quantity&&(c+="\x26serviceAsin\x3d"+b.serviceAsin+"\x26quantity\x3d"+b.quantity));return c};return{log:function(a,d){a="/gp/huc/ajax-handler/log-si-reftag.html/ref\x3d"+c(a,d);b.get(a)},getRef:c}}(),l=function(a){var c=g("#optOutSi");1!==c.size()?(e.log("optout_hidden"),a()):c.isChecked()?(e.log("optout_yes"),d.post("/gp/si/util/opt-out.html",{params:{sid:f.sessionId,rid:f.requestId},success:function(){a()},error:function(c,
b,d){n.ueLogError&&n.ueLogError({message:"[hlcx-si] ajax call in huc si opt out failed. statusText:"+b+" errorThrown: "+d},{logLevel:"ERROR",attribution:"services_interstitial_huc"});a()},timeout:1E3})):(e.log("optout_no"),a())},t=function(){d.ajax("/gp/si/util/get-services.html",{method:"get",params:{asin:k,offerID:f.offerId,limitForMAP:0,experimentWeblab:q,ri:f.requestId},success:function(c){if(c.services&&1<c.services.length&&c.services[0]){c=p=c.services[0];c="/gp/si/aui-si-pop.html/ref\x3d"+
e.getRef("impression")+"?ie\x3dUTF8\x26ba\x3d"+k+"\x26ca\x3d"+c+"\x26ri\x3d"+f.requestId+"\x26siHuc\x3d1\x26optout\x3d"+f.optOutEnabled;c={name:"services-modal",header:f.header,url:c,width:"685"};var d=b("#services-modal-trigger");a.create(d,c).show()}else m()},error:function(){m()}})},u=!1,v=function(a){if(u)return a.stopImmediatePropagation(),!1;u=!0;if(!b(".hlb-warranty").find("input").prop("checked"))return a.stopImmediatePropagation(),t(),!1},x=!1,z=function(){x||(x=!0,e.log("yes",{isAdding:!0,
serviceAsin:p,quantity:f.quantity}),h.when("HUC").execute(function(a){var c={serviceAsin:p,quantity:f.quantity};f.baseItemCartId&&(c.baseItemCartId=f.baseItemCartId);CartPerf.resetUEForAJAXRequest();a.makeAjaxCall("/gp/huc/ajax-handler/si-add-service.html",c,function(a){a=a.rid;CartPerf.setStartTimeForAJAXRequest();CartPerf.setIDForAJAXRequest(a);CartPerf.cfLoadedForAJAXRequest();f.prefetchEnabled?d.trigger("huc:ajax:after"):h.when("CheckoutPrefetch").execute(function(a){a.initiateAndStorePurchase()})},
void 0,function(){f.prefetchEnabled?d.trigger("huc:ajax:before"):h.when("CheckoutPrefetch").execute(function(a){a.clearHUCPTCInitiateId()})},function(){m()})}))},r=function(){e.log("no");m()},A=function(){c&&c.required&&c.link&&0===c.link.indexOf("http")&&b("#hlb-ptc-btn-native").attr("href","javascript:void(0);").bind("click.prefetch",function(){setTimeout(function(){n.location.href=c.link},20)})},y=function(){b("#hlb-ptc-btn-native").bind("click.siptc",v)};0<b("#popup-on-ptc").length||(b("#hlb-ptc-btn-native").hasClass("prefetch-click-bound")?
(y(),b("#hlb-ptc-btn-native").unbind("click.prefetch"),A()):y(),b(document.body).delegate("#siAddCoverage","click",function(){l(z)}),b(document.body).delegate("#siNoCoverage","click",function(){l(r)}),d.on("a:popover:hide:services-modal",function(){l(r)}),d.on("a:popover:ajaxFail:services-modal",m))}});"use strict";h.when("A","ready").register("subcart-view",function(d){var a=d.$;d.declarative("huc-view-cart",["click"],function(d){var b=d.data&&d.data.formID&&a("#"+d.data.formID);b.length&&(d.$event.preventDefault(),
b.submit())})});h.when("A","a-popover","a-tooltip","huc-common-util","sc-click-popover","ready").register("recent-change-popover",function(d,a,g,b){function f(a){a.length&&(a=a.closest(".huc-v2-msg-group").find(".a-expander-content-expanded").not(a),a.length&&a.parent().find(".huc-v2-item-msg").click())}function k(a,c){c=("loading"===c?l.itemLoading:l.itemSorry).clone().removeAttr("id").removeClass("huc-hidden");a.html("").append(c)}function p(){var a=g.get(l.imbTipsTrigger);a&&a.hide()}function q(){var c=
a.get(l.popoverTrigger);if(c){var b=c.$popover,c=l.msgList.find(".huc-v2-msg-group:visible").find(".huc-v2-item-messages"),d=c.height();c.data("originHeight")||c.data("originHeight",d);var e=c.data("originHeight"),f=m.scrollTop()+m.height(),b=b.offset().top+b.outerHeight()-f,b=d-b;b>=e?b="auto":10>b&&(b=10);d!==b&&c.height(b)}}var c=d.$,m=c(n),e=n.CartPerf||{},l={};b.refreshElements(l,{imbStatus:"#shouldOpenIMB",imbTabs:"#huc-imb-tabs",itemLoading:"#huc-imb-item-loading",itemSorry:"#huc-imb-item-sorrry",
msgList:"#huc-imb-msg-list",popoverTrigger:"#huc-imb-popover-action",imbTipsTrigger:"#huc-imb-tips-action"});d.declarative("huc-show-msg-group",["click"],function(a){var c=a.$currentTarget.find(".a-button");c.is(".a-button-selected")||(l.imbTabs.find(".a-button").filter(".a-button-selected").removeClass("a-button-selected"),c.addClass("a-button-selected"),c=l.msgList.find(".huc-v2-msg-group"),c.filter(":visible").addClass("huc-hidden"),c.filter("#"+a.data.category).removeClass("huc-hidden"),q())});
d.declarative("huc-show-imb-item-detail",["click"],function(a){var b=a.$currentTarget.closest(".a-expander-container").find(".a-expander-content");if(b.hasClass("a-expander-content-expanded")){f(b);var d=b.data("status");a.data.url&&2!==d&&3!==d&&(e.resetUEForAJAXRequest(),c.ajax({cache:"false",dataType:"json",type:"GET",url:a.data.url,beforeSend:function(){k(b,"loading");b.data("status",2)},error:function(){k(b,"error");b.data("status",1)},success:function(a){a?(e.setStartTimeForAJAXRequest(),e.setIDForAJAXRequest(a.requestId),
b.data("status",3),b.html(a.htmlContent),e.cfLoadedForAJAXRequest()):k(b,"error")}}))}});d.on("a:popover:afterShow:huc-imb-popover",q);1===parseInt(l.imbStatus.val(),10)&&(l.imbTipsTrigger.trigger("click"),setTimeout(p,3E3))});h.when("A","subcart-view","cf").register("imb-popover-show-metrics",function(d){function a(){var g=1===parseInt(d.$("#shouldOpenIMB").val(),10)?"imb_open_by_default":"imb_open_by_click";d.post("/gp/huc/ajax-handler/log-marker.html?tag\x3d"+g);d.off("a:popover:show:huc-imb-popover",
a)}d.on("a:popover:show:huc-imb-popover",a)});"use strict";h.when("A","huc-common-util","ready").register("huc-checkout-prefetch",function(d,a){var g=d.$,b=!1,f={},k={casUrl:"#cas-url",prefetchUrl:"#checkout-prefetch-url"};(function(){g("#hlb-ptc-btn-bottom").unbind("mouseover").bind("mouseover",function(a){a.preventDefault();g("#hlb-ptc-btn").trigger("mouseover")});g("#hlb-ptc-btn-bottom").unbind("click").bind("click",function(a){a.preventDefault();g("#hlb-ptc-btn-native")[0].click()});a.refreshElements(f,
k);var b=f.casUrl.val();if(b){var d=document.getElementsByTagName("head")[0];if(d){var c=document.createElement("script");c.src=b;c.onload=function(){c.parentNode&&d.removeChild(c)};c.onerror=function(a){n.console&&n.console.log("suppressed script error")};d.appendChild(c)}}})();return{casCallBack:function(a){if(a&&a.required){var k=g("#hlb-ptc-btn");k.unbind("mouseover").bind("mouseover",function(){0<g("#services-modal-trigger").length||b||(d.preload(f.prefetchUrl.val()+"?siteState\x3disRegularCheckout.1\x26onClickPTC\x3d1"),
b=!0)});k.find("a").addClass("prefetch-click-bound").attr("href","javascript:void(0);").bind("click.prefetch",function(){setTimeout(function(){n.location.href=a.link},20)})}}}});"use strict";h.when("A","huc-common-util","ready").register("huc-rec-upsell",function(d,a){function g(a){var b=c(a.currentTarget).find(".huc-v2-upsell-item-image img");f(a,b)}function b(a){var b=c(a.currentTarget);f(a,b)}function f(b,d){var f=b.type;b=c(b.currentTarget);var g=b.find(".huc-v2-upsell-item-slide");if(g.length){var h=
g.outerWidth(),n=g.outerHeight();if("mouseenter"===f||"focusin"===f){if(!e){e=!0;var r=p(d,g);q(g,r);(f=d.attr("data-anchor-id"))&&c("#"+f)&&(d=c("#"+f));f=d.offset().left-b.offset().left;b=d.width()-h;d=r?parseInt(d.css("padding-right"),10)+f+b+1:parseInt(d.css("padding-left"),10)+f-1;m?g.css("left",(r?d+h:d-h)+"px").show():(g.css("left",d+"px"),k(g,0,h,n,h),g.show().stop(!1).animate({left:(r?"+\x3d":"-\x3d")+h+"px"},{step:function(a,b){b=a-b.start;a=r?h-b:0;b=r?h:-b;k(c(this),0,b,n,a)},duration:100,
easing:"swing"}));g.find(".huc-upsell-max-2-lines").each(function(){a.truncateWithEllipsis(2,c(this))})}}else if("mouseleave"===f||"focusout"===f)e=!1,m?g.hide():(r=d.offset().left>g.offset().left,g.stop(!1).animate({left:(r?"+\x3d":"-\x3d")+h+"px"},{step:function(a,b){b=a-b.start;a=r?0:-b;b=r?h-b:h;k(c(this),0,b,n,a)},duration:100,easing:"swing",complete:function(){g.hide()}}))}}function k(a,c,b,d,f){a.css("clip","rect("+c+"px, "+b+"px, "+d+"px, "+f+"px)")}function p(a,b){a=a.offset().left+a.width()+
parseInt(a.css("padding-right"),10)+b.outerWidth()+10;b=c("#huc-page-container").outerWidth(!0);return a<b}function q(a,c){var b=a.css("padding-left"),d=a.css("padding-right"),f=parseInt(b,10),e=parseInt(d,10);if(c&&f>e||!c&&e>f)a.css("padding-left",d),a.css("padding-right",b);c?a.removeClass("left-border").addClass("right-border"):a.removeClass("right-border").addClass("left-border")}var c=d.$,m=a.isIE()&&!d.capabilities.isIE10Plus,e=!1;(function(){c(document).delegate(".huc-upsell-big-face-box-inner",
"mouseenter mouseleave focusin focusout",g);c(document).delegate(".huc-upsell-mix-face-box","mouseenter mouseleave focusin focusout",b);c(document).delegate(".huc-upsell-max-1-line","mouseenter",function(){var a=c(this);this.offsetWidth<this.scrollWidth&&!a.attr("title")&&a.attr("title",a.text())})})()});"use strict";h.when("A").register("huc-order-row",function(d){function a(a){a=a.popover;a.attrs("isAjaxFail")&&a.refresh()}var g=d.$;g(n);(function(){g(".huc-v2-order-row-image-box").each(function(){var b=
g(this).attr("id");void 0!==b&&(b="mini-item-"+b.substr(22),d.on("a:popover:ajaxFail:"+b,function(a){a.popover.attrs("isAjaxFail",!0)}),d.on("a:popover:ajaxSuccess:"+b,function(a){a.popover.attrs("isAjaxFail",!1)}),d.on("a:popover:beforeShow:"+b,a))})})()});"use strict";h.when("A","jQuery","ready").execute(function(d,a){function g(d){var f=a("#hlb-subcart"),c=a("#hlb-bottom-subcart");f.find("span.huc-subtotal").replaceWith(d.subtotal);c.find("span.huc-subtotal").replaceWith(d.subtotal);a("#hlb-ptc-btn.hlb-checkout-button.huc-button-large").find("a").text(d.pctButtonText);
a("#hlb-ptc-btn-bottom.hlb-checkout-button.huc-button-large").find("a").text(d.pctButtonText);a("#hlb-ship-message").replaceWith(d.shipMessage);a("#hucSnsFrequencyLabel").html(d.snsMessage);b(parseInt(d.totalQuantity,10))}function b(a){h.when("nav.setCartCount").execute(function(b){b(a)})}var f=-1,k;d.on("a:accordion:sns-accordion:select",function(a){f=parseInt(a.selectedRow.rowName.slice(-1),10)});d.on("a:popover:beforeShow:popover_sns",function(a){k=a.popover.data.itemId;f=-1});d.on("a:popover:beforeHide:popover_sns",
function(b){if(-1!==f){var d=a("#sns-spin-img"),c=a("#sns-information");b={itemID:k,frequency:f};h.when("HUC").execute(function(a){a.makeAjaxCall("/gp/huc/ajax-handler/sns.html",b,function(a){"OK"===a.status?(g(a),0===f?(d.replaceWith(""),c.replaceWith("")):(d.addClass("a-hidden"),c.removeClass("a-hidden"))):(d.addClass("a-hidden"),c.removeClass("a-hidden"));h.when("CheckoutPrefetch").execute(function(a){a.initiateAndStorePurchase()})},function(a,b){d.addClass("a-hidden");c.removeClass("a-hidden")},
function(a){d.removeClass("a-hidden");c.addClass("a-hidden")},function(){})})}})});"use strict";h.when("A","jQuery","huc-common-util","a-popover","a-tooltip","ready").register("huc-pinned-order-row",function(d,a,g,b,f){function k(a){a=a.$currentTarget;(e=b.get(a))&&e.attrs("fromOrderRow",0<a.closest(m.orderRow).length)}function h(){e&&e.isActive()&&(e.attrs("fromOrderRow")?e.updatePosition():e.hide())}function q(a){var b=a.popover;a=b.$popover;b.attrs("fromOrderRow")&&b.data.fromAddedItem&&(b=m.orderRowWithDivicer.data("isPinned")?
"fixed":"absolute",a.css("position",b),"fixed"===a.css("position")&&(b=parseInt(a.css("top"),10)-c.scrollTop(),a.css("top",b)))}var c=a(n),m={},e,l={imbTipsTrigger:"#huc-imb-tips-action",orderRow:"#huc-v2-order-row-container",orderRowDivider:"#huc-v2-order-row-divider",orderRowPlaceHolder:"#huc-v2-order-row-placeholder",orderRowWithDivicer:"#huc-v2-order-row-with-divider"};(function(){function a(b){b=c.scrollTop();if(m.orderRowWithDivicer.data("isPinned")){var d=-1*c.scrollLeft(),f=parseFloat(m.orderRow.css("left"));
d!==f&&(m.orderRow.css("left",d),m.orderRowDivider.css("left",d));b<n&&(b=m.orderRowWithDivicer,b.data("isPinned")&&(m.orderRowPlaceHolder.addClass("a-hidden"),b.removeClass("huc-v2-pinned-order-row-with-divider").data("isPinned",0),m.orderRow.removeClass("huc-v2-pinned-order-row"),m.orderRowDivider.addClass("a-hidden"),h()))}else b>n&&(b=m.orderRowWithDivicer,b.data("isPinned")||(m.orderRowPlaceHolder.removeClass("a-hidden"),m.orderRow.addClass("huc-v2-pinned-order-row"),m.orderRowDivider.removeClass("a-hidden"),
b.addClass("huc-v2-pinned-order-row-with-divider").data("isPinned",1),h()))}g.refreshElements(m,l);var b=m.orderRow;if(b.length){m.orderRowPlaceHolder.height(b.height());var n=(m.orderRow.offset()||{top:0}).top-26;c.scroll(a);d.declarative("a-popover","click",k);d.declarative("sc-click-popover","click",k);d.declarative("a-popover","mouseenter",k);d.on("a:popover:afterUpdatePosition",q);m.imbTipsTrigger.length&&(e=f.get(m.imbTipsTrigger))}})()});"use strict";n.amz_js_PopWin=function(d,a,g){n.open(d,
a,g).focus();return!1};"use strict";h.when("A","jQuery").execute(function(d){var a=n.ue;d.declarative("remaining-customizations-action","click",function(d){d.$currentTarget.parent().find(".remaining_customization_info").removeClass("aok-hidden");d.$currentTarget.hide();d.$event.preventDefault();"undefined"!==typeof a&&"function"===typeof a.count&&a.count("AmazonCustom:show-remaining-customizations",1)})});"use strict";h.when("A","jQuery","huc-rec-upsell","ready").execute("huc-countdown",function(d,
a){function g(b){var d=a(b).parents(".huc-v2-upsell-box");a(b).text("00:00");d.find(".add-to-cart-button").hide();d.find(".huc-deal-ended").show();d.find(".p13n-pd-progbarWrapper div:first").addClass("p13n-pd-progbarMissed").removeClass("p13n-pd-progbar")}function b(a,b){this._init(a,b)}b.prototype={_init:function(b,d){var g=this,h=a(b).attr("data-remainingSeconds");if(0<h)var c=setInterval(function(){g.updateCountdown(b,h--);0>h&&(clearInterval(c),d(b))},1E3);else d(b)},updateCountdown:function(b,
d){var g=Math.floor(d/3600),h=Math.floor(d/60%60);d=Math.floor(d%60);a(b).text((0<g?g+":":"")+(10>h?"0":"")+h+":"+(10>d?"0":"")+d)}};(function(){a(".huc-countdown").each(function(a,d){new b(d,g)})})()})});
/* ******** */
